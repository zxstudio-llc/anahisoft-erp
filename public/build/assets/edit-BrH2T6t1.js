import{r as f,j as e,u as xe,H as ge}from"./app-DQczwFTk.js";import{T as fe,a as ve,c as ne,b as je}from"./tabs-C6TkS0W8.js";import{B as V}from"./button-BYXnJyXv.js";import{B as ce}from"./badge-CIPxAGrn.js";import{I as H}from"./input-goWATpHJ.js";import{L as X}from"./label-BchK1h47.js";import{T as oe}from"./textarea-DHAakLHN.js";import{A as be}from"./app-layout-CxNCz1W0.js";import{C as K,a as Y,b as q,d as W}from"./card-BNPG6E-E.js";import{S as de,a as ue,b as he,c as me,d as N}from"./select-D52pRjk-.js";import{t as M}from"./index-Cou6Ygo0.js";import{T as we,e as ye,f as Ne}from"./app-sidebar-layout-DjIGW_b8.js";import{P as le}from"./plus-BGuKkasZ.js";import{X as ie}from"./x-CNv1352c.js";import"./app-C-su-A41.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CJpv9kZ5.js";import"./index-BfMh8EvQ.js";import"./index-D2mu7mBH.js";import"./index-CqVE9Fls.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-BVHM8iLO.js";import"./utils-CPN-yreq.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./toast-lvG1LsW6.js";import"./cookie-consent-DYpW6VIi.js";import"./index-DSuT5VJt.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";import"./index-DcW1-0jE.js";import"./dropdown-menu-DWIT9g2E.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";const j={hsvToRgb:(t,r,n)=>{const s=n*r,a=s*(1-Math.abs(t/60%2-1)),i=n-s;let l,c,d;return t>=0&&t<60?(l=s,c=a,d=0):t>=60&&t<120?(l=a,c=s,d=0):t>=120&&t<180?(l=0,c=s,d=a):t>=180&&t<240?(l=0,c=a,d=s):t>=240&&t<300?(l=a,c=0,d=s):(l=s,c=0,d=a),[Math.round((l+i)*255),Math.round((c+i)*255),Math.round((d+i)*255)]},rgbToHsv:(t,r,n)=>{t/=255,r/=255,n/=255;const s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;let l=0;const c=s===0?0:i/s,d=s;if(i!==0){switch(s){case t:l=(r-n)/i%6;break;case r:l=(n-t)/i+2;break;case n:l=(t-r)/i+4;break}l*=60}return l<0&&(l+=360),[l,c,d]},hexToRgb:t=>{if(!t||typeof t!="string")return[0,0,0];const r=t.trim().toLowerCase();if(/^#?[0-9a-f]{3}$/.test(r)){const s=r.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/,"$1$1$2$2$3$3");return[parseInt(s.substring(0,2),16),parseInt(s.substring(2,4),16),parseInt(s.substring(4,6),16)]}const n=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(r);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[0,0,0]},isValidHex:t=>/^#?([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/i.test(t),rgbToHex:(t,r,n)=>{const s=a=>Math.max(0,Math.min(255,Math.round(a)));return"#"+[s(t),s(r),s(n)].map(a=>{const i=a.toString(16);return i.length===1?"0"+i:i}).join("")},rgbToHsl:(t,r,n)=>{t/=255,r/=255,n/=255;const s=Math.max(t,r,n),a=Math.min(t,r,n);let i,l,c=(s+a)/2;if(s===a)i=l=0;else{const d=s-a;switch(l=c>.5?d/(2-s-a):d/(s+a),s){case t:i=(r-n)/d+(r<n?6:0);break;case r:i=(n-t)/d+2;break;case n:i=(t-r)/d+4;break;default:i=0}i/=6}return[Math.round(i*360),Math.round(l*100),Math.round(c*100)]},hslToRgb:(t,r,n)=>{t/=360,r/=100,n/=100;const s=(c,d,v)=>(v<0&&(v+=1),v>1&&(v-=1),v<1/6?c+(d-c)*6*v:v<1/2?d:v<2/3?c+(d-c)*(2/3-v)*6:c);let a,i,l;if(r===0)a=i=l=n;else{const c=n<.5?n*(1+r):n+r-n*r,d=2*n-c;a=s(d,c,t+1/3),i=s(d,c,t),l=s(d,c,t-1/3)}return[Math.round(a*255),Math.round(i*255),Math.round(l*255)]},srgbToLinear:t=>(t=t/255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)),linearToSrgb:t=>{const r=t<=.0031308?12.92*t:1.055*Math.pow(t,.4166666666666667)-.055;return Math.round(Math.max(0,Math.min(1,r))*255)},rgbToXyz:(t,r,n)=>{const s=j.srgbToLinear(t),a=j.srgbToLinear(r),i=j.srgbToLinear(n),l=.4124564*s+.3575761*a+.1804375*i,c=.2126729*s+.7151522*a+.072175*i,d=.0193339*s+.119192*a+.9503041*i;return[l,c,d]},xyzToRgb:(t,r,n)=>{const s=3.2404542*t-1.5371385*r-.4985314*n,a=-.969266*t+1.8760108*r+.041556*n,i=.0556434*t-.2040259*r+1.0572252*n,l=j.linearToSrgb(s),c=j.linearToSrgb(a),d=j.linearToSrgb(i);return[l,c,d]},xyzToOklab:(t,r,n)=>{const s=.8189330101*t+.3618667424*r-.1288597137*n,a=.0329845436*t+.9293118715*r+.0361456387*n,i=.0482003018*t+.2643662691*r+.633851707*n,l=Math.cbrt(s),c=Math.cbrt(a),d=Math.cbrt(i),v=.2104542553*l+.793617785*c-.0040720468*d,p=1.9779984951*l-2.428592205*c+.4505937099*d,w=.0259040371*l+.7827717662*c-.808675766*d;return[v,p,w]},oklabToXyz:(t,r,n)=>{const s=t+.3963377774*r+.2158037573*n,a=t-.1055613458*r-.0638541728*n,i=t-.0894841775*r-1.291485548*n,l=s*s*s,c=a*a*a,d=i*i*i,v=1.2268798733*l-.5578149965*c+.2813910456*d,p=-.0405801784*l+1.1122568696*c-.0716766787*d,w=-.0763812845*l-.4214819784*c+1.5861632204*d;return[v,p,w]},oklabToOklch:(t,r,n)=>{const s=Math.sqrt(r*r+n*n);let a=Math.atan2(n,r)*180/Math.PI;return a<0&&(a+=360),[t,s,a]},oklchToOklab:(t,r,n)=>{const s=n*Math.PI/180,a=r*Math.cos(s),i=r*Math.sin(s);return[t,a,i]},rgbToOklch:(t,r,n)=>{const[s,a,i]=j.rgbToXyz(t,r,n),[l,c,d]=j.xyzToOklab(s,a,i),[v,p,w]=j.oklabToOklch(l,c,d);return[Math.round(v*100*100)/100,Math.round(p*100)/100,Math.round(w*100)/100]},oklchToRgb:(t,r,n)=>{const s=t/100,[a,i,l]=j.oklchToOklab(s,r,n),[c,d,v]=j.oklabToXyz(a,i,l),[p,w,g]=j.xyzToRgb(c,d,v);return[Math.max(0,Math.min(255,Math.round(p))),Math.max(0,Math.min(255,Math.round(w))),Math.max(0,Math.min(255,Math.round(g)))]}},Ce=({hue:t,saturation:r,value:n,onChange:s,className:a=""})=>{const i=f.useRef(null),[l,c]=f.useState(!1),d=p=>{if(!i.current)return;const w=i.current.getBoundingClientRect();let g,L;"clientX"in p&&"clientY"in p?(g=p.clientX,L=p.clientY):(g=0,L=0);const C=Math.max(0,Math.min(g-w.left,w.width)),R=Math.max(0,Math.min(L-w.top,w.height)),_=C/w.width,I=1-R/w.height;s({saturation:_,value:I})},v=p=>{p.preventDefault(),p.stopPropagation(),c(!0),d(p)};return f.useEffect(()=>{const p=g=>{l&&(g.preventDefault(),g.stopPropagation(),d(g))},w=g=>{g.preventDefault(),g.stopPropagation(),c(!1)};if(l)return document.addEventListener("mousemove",p,{passive:!1}),document.addEventListener("mouseup",w,{passive:!1}),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",w)}},[l]),e.jsx("div",{ref:i,className:`relative cursor-crosshair rounded-lg overflow-hidden ${a}`,style:{background:`
          linear-gradient(to right, #fff, hsl(${t}, 100%, 50%)),
          linear-gradient(to top, #000, transparent)
        `},onMouseDown:v,children:e.jsx("div",{className:"absolute w-5 h-5 border-2 border-white rounded-full shadow-lg transform -translate-x-2.5 -translate-y-2.5 pointer-events-none",style:{left:`${r*100}%`,top:`${(1-n)*100}%`,boxShadow:"0 0 0 1px rgba(0,0,0,0.3), 0 2px 4px rgba(0,0,0,0.2)"}})})},Se=({hue:t,onChange:r,className:n=""})=>{const s=f.useRef(null),a=f.useRef(!1),i=c=>{if(!s.current)return;const d=s.current.getBoundingClientRect(),p=Math.max(0,Math.min(c.clientX-d.left,d.width))/d.width*360;r(p)},l=c=>{c.preventDefault(),a.current=!0,i(c.nativeEvent)};return f.useEffect(()=>{const c=v=>{a.current&&i(v)},d=()=>{a.current=!1};return a.current&&(document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d)}},[]),e.jsx("div",{ref:s,className:`cursor-pointer rounded-lg overflow-hidden ${n}`,style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},onMouseDown:l,children:e.jsx("div",{className:"relative h-full",style:{left:`${t/360*100}%`},children:e.jsx("div",{className:"absolute top-1/2 w-3 h-6 bg-white border border-gray-300 rounded-sm shadow-md transform -translate-x-1/2 -translate-y-1/2 pointer-events-none"})})})},_e=({rgb:t,onChange:r,className:n=""})=>{const s=(a,i)=>{const l=Math.max(0,Math.min(255,parseInt(i)||0)),c={...t,[a]:l};r(c)};return e.jsx("div",{className:`grid grid-cols-3 gap-2 ${n}`,children:["r","g","b"].map(a=>e.jsxs("div",{className:"text-center",children:[e.jsx("input",{type:"number",value:t[a],onChange:i=>s(a,i.target.value),className:"w-full px-2 py-2 text-center border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"255"}),e.jsx("label",{className:"block text-xs text-gray-600 mt-1 font-medium uppercase",children:a})]},a))})},ke=["HEX","HSL","OKLCH","RGB"],Te=({format:t,onChange:r,className:n=""})=>{const[s,a]=f.useState(!1),i=f.useRef(null);return f.useEffect(()=>{const l=c=>{i.current&&!i.current.contains(c.target)&&a(!1)};return s&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[s]),e.jsxs("div",{ref:i,className:`relative ${n}`,children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),l.preventDefault(),a(!s)},className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 transition-colors",type:"button",children:[t,e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})]}),s&&e.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[80px]",children:ke.map(l=>e.jsx("button",{onClick:c=>{c.stopPropagation(),c.preventDefault(),r(l),a(!1)},type:"button",className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg ${t===l?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:l},l))})]})},Me=({color:t,size:r="w-8 h-8",className:n=""})=>e.jsx("div",{className:`${r} rounded-full border-2 border-gray-200 shadow-sm ${n}`,style:{backgroundColor:t}}),Le=({color:t,onChange:r,onClose:n,className:s=""})=>{const[a,i,l]=j.hexToRgb(t),[c,d,v]=j.rgbToHsv(a,i,l),[p,w]=f.useState(c),[g,L]=f.useState(d),[C,R]=f.useState(v),[_,I]=f.useState({r:a,g:i,b:l});f.useEffect(()=>{const[k,$,P]=j.hsvToRgb(p,g,C);I({r:k,g:$,b:P});const A=j.rgbToHex(k,$,P);r(A)},[p,g,C,r]);const U=({saturation:k,value:$})=>{L(k),R($)},J=k=>{I(k);const[$,P,A]=j.rgbToHsv(k.r,k.g,k.b);w($),L(P),R(A)};return e.jsxs("div",{className:`p-4 bg-white border border-gray-200 rounded-xl shadow-2xl ${s}`,onClick:k=>{k.stopPropagation()},children:[e.jsx(Ce,{hue:p,saturation:g,value:C,onChange:U,className:"w-full h-56 mb-4"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-800 cursor-pointer",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"m2 22 1-1h3l9-9"}),e.jsx("path",{d:"M3 21v-3l9-9"}),e.jsx("path",{d:"m15 6 3.5-3.5a2.12 2.12 0 0 1 3 3L18 9l-3-3"})]})}),e.jsx(Me,{color:t,className:"w-12 h-8 rounded-lg"}),e.jsx(Se,{hue:p,onChange:w,className:"flex-1 h-8"})]}),e.jsx(_e,{rgb:_,onChange:J})]})},pe=({label:t,color:r,onChange:n,showPicker:s=!1,onPickerToggle:a,className:i="",initialFormat:l="HEX",onFormatChange:c})=>{const[d,v]=f.useState(!1),[p,w]=f.useState(l);f.useEffect(()=>{console.log("Color format changed to:",p)},[p]);const[g,L]=f.useState({}),C=f.useRef(null),R=a!==void 0?s:d,_=a||(()=>v(!d)),I=h=>{console.log("Format changing from",p,"to",h),w(h),c&&c(h)},U=()=>{const[h,y,b]=j.hexToRgb(r);switch(p){case"HEX":return r.toUpperCase();case"HSL":const[S,E,O]=j.rgbToHsl(h,y,b);return`hsl(${S}, ${E}%, ${O}%)`;case"OKLCH":const[D,G,B]=j.rgbToOklch(h,y,b);return`oklch(${D}% ${G} ${B})`;case"RGB":return`rgb(${h}, ${y}, ${b})`;default:return r.toUpperCase()}},J=()=>{const[h,y,b]=j.hexToRgb(r);switch(p){case"HEX":return[{label:"HEX",value:r.toUpperCase(),unit:""}];case"HSL":const[S,E,O]=j.rgbToHsl(h,y,b);return console.log("getColorComponents HSL:",{h:S,s:E,l:O,originalColor:r}),[{label:"H",value:S,unit:"°"},{label:"S",value:E,unit:"%"},{label:"L",value:O,unit:"%"}];case"OKLCH":const[D,G,B]=j.rgbToOklch(h,y,b);return[{label:"L",value:D,unit:"%"},{label:"C",value:G,unit:""},{label:"H",value:B,unit:"°"}];case"RGB":return[{label:"R",value:h,unit:""},{label:"G",value:y,unit:""},{label:"B",value:b,unit:""}];default:return[{label:"HEX",value:r.toUpperCase(),unit:""}]}},k=(h,y)=>{L(b=>({...b,[h]:y}))},$=(h,y)=>{},P=()=>{if(Object.keys(g).length!==0){console.log("Committing editing values:",g);try{const y=J().map(S=>{if(g[S.label]!==void 0){const E=g[S.label];return{...S,value:parseFloat(E)||S.value}}return S});let b=r;switch(p){case"HEX":const S=g.HEX;S&&S.match(/^#?[0-9A-Fa-f]{6}$/)&&(b=S.startsWith("#")?S:`#${S}`);break;case"RGB":const[E,O,D]=y.map(z=>Math.max(0,Math.min(255,parseFloat(z.value.toString())||0)));b=j.rgbToHex(E,O,D);break;case"HSL":const[G,B,ee]=y.map((z,re)=>{const Q=parseFloat(z.value.toString())||0;return re===0?Math.max(0,Math.min(360,Q)):Math.max(0,Math.min(100,Q))}),[te,se,ae]=j.hslToRgb(G,B,ee);b=j.rgbToHex(te,se,ae);break;case"OKLCH":const[o,u,x]=y.map((z,re)=>{const Q=parseFloat(z.value.toString())||0;return re===0?Math.max(0,Math.min(100,Q)):re===1?Math.max(0,Q):Math.max(0,Math.min(360,Q))}),[m,T,F]=j.oklchToRgb(o,u,x);b=j.rgbToHex(m,T,F);break}console.log("Color conversion result:",{oldColor:r,newColor:b,format:p}),b!==r&&n(b)}catch(h){console.error("Error committing editing values:",h),M.error("Invalid color value")}L({})}},A=(h,y,b)=>{h.key==="Enter"&&(P(),h.currentTarget.blur()),h.key==="Escape"&&(L({}),h.currentTarget.blur())},Z=async h=>{if(h.stopPropagation(),h.preventDefault(),!navigator.clipboard){M.error("Clipboard API not available");return}try{await navigator.clipboard.writeText(U()),M.success("Color copied to clipboard!")}catch(y){console.error("Failed to copy color:",y),M.error("Failed to copy color")}};return f.useEffect(()=>{const h=y=>{C.current&&!C.current.contains(y.target)&&(P(),a===void 0&&v(!1))};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[R,a,g,p,r]),e.jsxs("div",{className:`w-full bg-gray-50 rounded-xl ${i}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 capitalize",children:t}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Te,{format:p,onChange:I})})]}),e.jsxs("div",{ref:C,className:"relative",children:[e.jsxs("div",{className:"border-input gap-2 flex items-center justify-between file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-2 text-base shadow-xs transition-[color,box-shadow] outline-none",children:[e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",onClick:()=>_(!R),className:"w-6 h-6 rounded-full border-1 border-gray-200 shadow-sm transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",style:{backgroundColor:r},"aria-label":`${t} color picker`})}),e.jsx("div",{className:"flex flex-row gap-1 w-full justify-between",children:J().map((h,y)=>e.jsxs("div",{className:"items-center flex",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h.label}),e.jsx("input",{type:"text",value:g[h.label]!==void 0?g[h.label]:h.value.toString(),onChange:b=>k(h.label,b.target.value),onBlur:b=>$(h.label,b.target.value),onKeyDown:b=>A(b,h.label,b.currentTarget.value),className:"w-full text-sm text-center border-none outline-none ring-none",placeholder:h.value.toString()}),h.unit&&e.jsx("div",{className:"text-xs text-gray-400",children:h.unit})]},y))}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",onClick:Z,children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})})]}),R&&e.jsx(Le,{color:r,onChange:n,onClose:()=>a?a(!1):v(!1),className:"absolute top-full left-0 mt-2 z-50 w-80"})]})]})};function Ct({settings:t}){var B,ee,te,se,ae;const r={site_name:t.site_name||"",site_description:t.site_description||"",logo:null,favicon:null,support_email:t.support_email||"",support_phone:t.support_phone||"",primary_color:t.primary_color||"#3b82f6",secondary_color:t.secondary_color||"#10b981",analytics_data:t.analytics_data||[],seo_title:t.seo_title||"",seo_description:t.seo_description||"",seo_keywords:t.seo_keywords||"",seo_metadata:t.seo_metadata||[],social_links:t.social_links||[]},n={name:"Default Script",description:"Script de ejemplo para tracking",tag:'<script>console.log("Analytics loaded")<\/script>',position:"head"},{data:s,setData:a,post:i,processing:l,errors:c}=xe(r),[d,v]=f.useState(t.primary_color||null),[p,w]=f.useState(t.secondary_color||null),[g,L]=f.useState(t.social_links||[{platform:"facebook",url:""}]),[C,R]=f.useState(t.analytics_data&&t.analytics_data.length>0?t.analytics_data:[n]),[_,I]=f.useState(t.seo_metadata||[]),[U,J]=f.useState(t.logo_url||null),[k,$]=f.useState(t.favicon_url||null),P={application:["site_name","site_description","support_email","support_phone","logo","favicon"],analytics:["analytics_data"],seo:["seo_title","seo_description","seo_keywords"],social:[]},A=()=>{const o={application:[],analytics:[],seo:[],social:[]};return s.site_name||o.application.push("Site Name"),s.site_description||o.application.push("Site Description"),s.support_email||o.application.push("Support Email"),s.support_phone||o.application.push("Support Phone"),!U&&!t.logo_path&&o.application.push("Logo"),!k&&!t.favicon_path&&o.application.push("Favicon"),(!s.analytics_data||s.analytics_data.length===0)&&o.analytics.push("At least one analytics script"),s.seo_title||o.seo.push("SEO Title"),s.seo_description||o.seo.push("SEO Description"),s.seo_keywords||o.seo.push("SEO Keywords"),g.length>0&&g.filter(x=>!x.platform||!x.url||!Z(x.url)).length>0&&o.social.push("Invalid Social Links"),o},Z=o=>{try{return new URL(o),!0}catch{return!1}};f.useEffect(()=>{a("social_links",g)},[g,a]),f.useEffect(()=>{a("analytics_data",C)},[C,a]),f.useEffect(()=>{a("seo_metadata",_)},[_,a]),f.useEffect(()=>{const o=C.every(u=>u.name&&u.description&&u.tag&&u.position);a("analytics_data",o?C:[])},[C,a]);const h=o=>{o.preventDefault();const u=A(),x=Object.values(u).flat().length;if(x>0){M.error(e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"font-bold",children:["Faltan ",x," campos requeridos:"]}),Object.entries(u).map(([m,T])=>T.length>0&&e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium capitalize",children:[m,":"]})," ",T.join(", ")]},m))]}),{duration:1e4,position:"top-center"});return}i(route("admin.settings.update"),{preserveScroll:!0,forceFormData:!0})},y=o=>{var T;const u=(T=o.target.files)==null?void 0:T[0];if(!u)return;if(!["image/png","image/jpeg","image/svg+xml"].includes(u.type)){M.error("Formato de logo inválido. Usa PNG, JPEG o SVG.");return}if(u.size>1024*1024){M.error("El logo no debe superar 1MB.");return}const m=new Image;m.onload=()=>{if(m.width<100||m.height<30)M.error("El logo es muy pequeño (mínimo 100x30px).");else if(m.width>600||m.height>200)M.error("El logo es muy grande (máximo 600x200px).");else{a("logo",u);const F=new FileReader;F.onloadend=()=>{J(F.result)},F.readAsDataURL(u)}},m.onerror=()=>M.error("No se pudo leer la imagen del logo."),m.src=URL.createObjectURL(u)},b=o=>{var T;const u=(T=o.target.files)==null?void 0:T[0];if(!u)return;if(!["image/png","image/x-icon","image/vnd.microsoft.icon","image/svg+xml"].includes(u.type)){M.error("Formato de favicon inválido. Usa ICO, PNG o SVG.");return}if(u.size>512*1024){M.error("El favicon no debe superar 512KB.");return}const m=new Image;m.onload=()=>{if(m.width<16||m.height<16)M.error("El favicon es muy pequeño (mínimo 16x16px).");else if(m.width>180||m.height>180)M.error("El favicon es muy grande (máximo 180x180px).");else{a("favicon",u);const F=new FileReader;F.onloadend=()=>{$(F.result)},F.readAsDataURL(u)}},m.onerror=()=>M.error("No se pudo leer la imagen del favicon."),m.src=URL.createObjectURL(u)},S=(o,u,x)=>{const m=[...g];m[o][u]=x,L(m)},E=(o,u,x)=>{const m=[...C];m[o][u]=x,R(m)},O=(o,u,x)=>{const m=[..._];m[o][u]=x,I(m)},D=({value:o,children:u})=>{const x=A(),m=P[o]||[],T=x[o]||[],F=T.length>0,z=m.length>0&&T.length===0;return e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs(je,{value:o,children:[u,F&&e.jsx(ce,{variant:"destructive",className:"h-4 w-4 p-0 flex items-center justify-center",children:"!"}),z&&e.jsx(ce,{variant:"outline",className:"h-4 w-4 p-0 flex items-center justify-center text-green-500 border-green-500",children:"✓"})]})})},G=()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{children:e.jsxs(K,{children:[e.jsx(Y,{children:e.jsx(q,{children:"Color Picker"})}),e.jsxs(W,{className:"space-y-4 w-full",children:[e.jsx(pe,{label:"Color Principal",color:d,onChange:v,className:"bg-transparent"}),e.jsx(pe,{label:"Color secondary",color:p,onChange:w,className:"bg-transparent"})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(K,{children:[e.jsx(Y,{children:e.jsx(q,{children:"Favicon"})}),e.jsx(W,{children:k&&e.jsx("img",{src:k,alt:"Favicon preview",className:"w-full h-full object-contain"})})]}),e.jsxs(K,{children:[e.jsx(Y,{children:e.jsx(q,{children:"Logo"})}),e.jsx(W,{children:U&&e.jsx("img",{src:U,alt:"Logo preview",className:"w-full h-full object-contain"})})]})]})]});return e.jsxs(be,{children:[e.jsx(ge,{title:"Configuración del Sitio"}),e.jsxs("div",{className:"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración del Sitio"}),e.jsx("p",{className:"text-muted-foreground",children:"Configura la información del sitio web"})]})}),e.jsx("div",{children:e.jsx("form",{onSubmit:h,className:"space-y-6",encType:"multipart/form-data",children:e.jsxs(fe,{defaultValue:"application",className:"w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(ve,{className:"grid grid-cols-4",children:[e.jsx(D,{value:"application",children:"Application"}),e.jsx(D,{value:"analytics",children:"Analytics"}),e.jsx(D,{value:"seo",children:"SEO"}),e.jsx(D,{value:"social",children:"Social Networks"})]}),e.jsx(V,{type:"submit",disabled:l,children:l?"Saving...":"Save Settings"})]}),e.jsx(ne,{value:"application",className:"space-y-4",children:e.jsxs("div",{className:"flex gap-4 w-full justify-between",children:[e.jsxs(K,{className:"w-6/9",children:[e.jsx(Y,{children:e.jsx(q,{children:"General Settings"})}),e.jsxs(W,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsxs(X,{htmlFor:"site_name",children:["Site Name ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx(H,{id:"site_name",value:s.site_name,onChange:o=>a("site_name",o.target.value)}),c.site_name&&e.jsx("p",{className:"text-sm text-red-500",children:c.site_name})]}),e.jsxs("div",{children:[e.jsxs(X,{htmlFor:"site_description",children:["Site Description ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx(oe,{id:"site_description",value:s.site_description,onChange:o=>a("site_description",o.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(X,{htmlFor:"logo",children:["Logo ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{id:"logo",type:"file",accept:"image/png, image/jpeg, image/svg+xml",onChange:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(V,{type:"button",variant:"outline",className:"w-full",children:"Seleccionar Logo"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Formatos recomendados: PNG, JPG, SVG. Tamaño máximo: 2MB"})]}),e.jsxs("div",{children:[e.jsxs(X,{htmlFor:"favicon",children:["Favicon ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{id:"favicon",type:"file",accept:"image/png, image/x-icon, image/svg+xml",onChange:b,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(V,{type:"button",variant:"outline",className:"w-full",children:"Seleccionar Favicon"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Formatos recomendados: PNG, ICO, SVG. Tamaño recomendado: 32x32px"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(X,{htmlFor:"support_email",children:["Support Email ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx(H,{id:"support_email",type:"email",value:s.support_email,onChange:o=>a("support_email",o.target.value)})]}),e.jsxs("div",{children:[e.jsxs(X,{htmlFor:"support_phone",children:["Support Phone ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx(H,{id:"support_phone",value:s.support_phone,onChange:o=>a("support_phone",o.target.value)})]})]})]})]}),e.jsx("div",{className:"w-3/9",children:e.jsx(G,{})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-4",children:e.jsxs(K,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Analytics Scripts"}),C.length===1&&e.jsx("p",{className:"text-sm text-red-500",children:"Debes agregar al menos un script de analytics"})]}),e.jsxs(V,{type:"button",variant:"outline",onClick:()=>R([...C,{name:"",description:"",tag:"",position:"head"}]),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Script"]})]})}),e.jsx(W,{className:"space-y-4",children:C.map((o,u)=>e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(H,{placeholder:"Name",value:o.name,onChange:x=>E(u,"name",x.target.value)}),e.jsx(H,{placeholder:"Description",value:o.description,onChange:x=>E(u,"description",x.target.value)})]}),e.jsxs("select",{value:o.position,onChange:x=>E(u,"position",x.target.value),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"head",children:"Head"}),e.jsx("option",{value:"footer",children:"Footer"})]}),e.jsx(oe,{placeholder:"<script>...<\/script>",value:o.tag,onChange:x=>E(u,"tag",x.target.value),className:"font-mono text-sm"}),C.length>1&&e.jsxs(V,{type:"button",variant:"destructive",size:"sm",onClick:()=>{R(C.filter((x,m)=>m!==u))},children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Remove Script"]})]},u))})]})}),e.jsx(ne,{value:"seo",className:"space-y-4",children:e.jsxs(K,{children:[e.jsx(Y,{children:e.jsx(q,{children:"SEO Settings"})}),e.jsx(W,{className:"space-y-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-2/3 space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"SEO data"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(H,{placeholder:"SEO Title",value:s.seo_title,onChange:o=>a("seo_title",o.target.value),required:!0}),e.jsxs("div",{children:[e.jsx(oe,{placeholder:"SEO Description",value:s.seo_description,onChange:o=>a("seo_description",o.target.value),maxLength:160,required:!0}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.seo_description.length,"/160 characters"]})]}),e.jsx(H,{placeholder:"Keywords (comma separated)",value:s.seo_keywords,onChange:o=>a("seo_keywords",o.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(X,{children:"Metadata Tags"}),e.jsxs(V,{type:"button",variant:"outline",onClick:()=>I([..._,{key:"",value:""}]),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Añadir Metadata"]})]}),_.map((o,u)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(de,{value:o.key,onValueChange:x=>O(u,"key",x),children:[e.jsx(ue,{className:"w-3/7",children:e.jsx(he,{placeholder:"Selecciona una meta tag"})}),e.jsxs(me,{children:[e.jsx(N,{value:"og:title",children:"Título para Redes Sociales (og:title)"}),e.jsx(N,{value:"og:description",children:"Descripción para Redes Sociales (og:description)"}),e.jsx(N,{value:"og:site_name",children:"Título WebSite (og:site_name)"}),e.jsx(N,{value:"og:locale",children:"Localidad (og:locale) ejemplo: en_US"}),e.jsx(N,{value:"twitter:card",children:"Tarjeta de Twitter (twitter:card)"}),e.jsx(N,{value:"og:image",children:"Imagen para Redes Sociales (og:image)"}),e.jsx(N,{value:"og:image:height",children:"Alto de Imagen (og:image:height)"}),e.jsx(N,{value:"og:image:width",children:"Ancho de Imagen (og:image:width)"}),e.jsx(N,{value:"og:image:type",children:"Tipo de imagen (og:image:type)"}),e.jsx(N,{value:"twitter:site",children:"Usuario Twitter (twitter:site)"}),e.jsx(N,{value:"twitter:title",children:"Título de Twitter (twitter:title)"}),e.jsx(N,{value:"twitter:description",children:"Descripción de Twitter (twitter:description)"}),e.jsx(N,{value:"twitter:image",children:"Imagen de Twitter (twitter:image)"}),e.jsx(N,{value:"twitter:image:height",children:"Alto de Imagen Twitter (twitter:image:height)"}),e.jsx(N,{value:"twitter:image:width",children:"Ancho de Imagen Twitter (twitter:image:width)"}),e.jsx(N,{value:"robots",children:"Directiva de Indexación (robots)"})]})]}),e.jsx(H,{placeholder:"Valor",value:o.value,onChange:x=>O(u,"value",x.target.value),className:"flex-1 w-4/7"}),e.jsx(V,{type:"button",variant:"ghost",size:"icon",onClick:()=>I(_.filter((x,m)=>m!==u)),children:e.jsx(ie,{className:"w-4 h-4"})})]},u))]})]}),e.jsxs("div",{className:"space-y-4 w-1/3",children:[e.jsx("h3",{className:"font-medium",children:"SEO Preview"}),e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Google Preview"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-blue-700 text-lg font-medium truncate w-full",children:s.seo_title||"Your page title appears here"}),e.jsx("p",{className:"text-green-700 text-sm",children:typeof window<"u"?window.location.origin:"https://yourwebsite.com"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.seo_description||"Your meta description will appear here. Keep it under 160 characters."})]})]}),e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Social Media Preview"}),e.jsx("div",{className:"bg-gray-100 p-4 rounded max-w-md",children:e.jsxs("div",{className:"bg-white border rounded overflow-hidden",children:[e.jsx("div",{className:"bg-gray-200 h-40 w-full flex items-center justify-center",children:(B=_.find(o=>o.key==="og:image"))!=null&&B.value?e.jsx("img",{src:(ee=_.find(o=>o.key==="og:image"))==null?void 0:ee.value,alt:"Social preview",className:"object-cover h-full w-full"}):e.jsx("span",{className:"text-gray-500",children:"Image preview will appear here"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:((te=_.find(o=>o.key==="og:title"))==null?void 0:te.value)||s.seo_title||"Your title"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:((se=_.find(o=>o.key==="og:description"))==null?void 0:se.value)||s.seo_description||"Your description will appear here"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:typeof window<"u"?window.location.origin:"https://yourwebsite.com"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:((ae=_.find(o=>o.key==="og:site_name"))==null?void 0:ae.value)||"your web name"})]})]})})]})]})]})})]})}),e.jsx(ne,{value:"social",className:"space-y-4",children:e.jsxs(K,{children:[e.jsx(Y,{children:e.jsx(q,{children:"Social Networks"})}),e.jsxs(W,{className:"space-y-4",children:[g.map((o,u)=>{const x=!o.url||!Z(o.url);return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(de,{value:o.platform,onValueChange:m=>S(u,"platform",m),children:[e.jsx(ue,{className:"w-32",children:e.jsx(he,{placeholder:"Plataforma"})}),e.jsxs(me,{children:[e.jsx(N,{value:"facebook",children:"Facebook"}),e.jsx(N,{value:"twitter",children:"Twitter"}),e.jsx(N,{value:"instagram",children:"Instagram"}),e.jsx(N,{value:"linkedin",children:"LinkedIn"}),e.jsx(N,{value:"youtube",children:"YouTube"}),e.jsx(N,{value:"tiktok",children:"TikTok"})]})]}),e.jsx(H,{value:o.url,placeholder:"https://...",onChange:m=>S(u,"url",m.target.value),className:`flex-2 ${x?"border-red-500":""}`}),x&&e.jsxs(we,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("span",{className:"text-red-500 text-sm",children:"!"})}),e.jsx(Ne,{children:e.jsx("p",{children:"URL inválida"})})]}),g.length>1&&e.jsx(V,{type:"button",variant:"ghost",size:"icon",onClick:()=>L(g.filter((m,T)=>T!==u)),children:e.jsx(ie,{className:"w-4 h-4"})})]},u)}),e.jsxs(V,{type:"button",variant:"outline",onClick:()=>L([...g,{platform:"facebook",url:""}]),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Social Network"]})]})]})})]})})})]})]})}export{Ct as default};
