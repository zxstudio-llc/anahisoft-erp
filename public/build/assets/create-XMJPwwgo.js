import{r as g,j as e,H as N,a as _}from"./app-DQczwFTk.js";import{A as C}from"./app-layout-CxNCz1W0.js";import{L as r}from"./label-BchK1h47.js";import{I as n}from"./input-goWATpHJ.js";import{B as y}from"./button-BYXnJyXv.js";import{I as F}from"./image-dropzone-B7t8X9ae.js";import{S}from"./switch-x9PZ-zT7.js";import{C as b,d as j,a as z,b as I}from"./card-BNPG6E-E.js";import"./app-C-su-A41.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-CX1ZUDb2.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BfMh8EvQ.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./trash-2-b2Qe_qpo.js";import"./index-7Ou4doz_.js";const k=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Crear Banner",href:"/admin/banners/create"}],p=[{label:"1024x256 (4:1)",width:1024,height:256},{label:"1024x300 (24:7)",width:1024,height:300},{label:"1024x384 (8:3)",width:1024,height:384},{label:"1024x768 (4:3)",width:1024,height:768},{label:"1280x267 (24:5)",width:1280,height:267},{label:"1280x375 (24:7)",width:1280,height:375},{label:"1280x400 (16:5)",width:1280,height:400},{label:"1280x800 (8:5)",width:1280,height:800},{label:"1366x256 (16:3)",width:1366,height:256},{label:"1366x384 (32:9)",width:1366,height:384},{label:"1366x768 (16:9)",width:1366,height:768},{label:"1440x300 (24:7)",width:1440,height:300},{label:"1440x450 (16:5)",width:1440,height:450},{label:"1440x900 (8:5)",width:1440,height:900},{label:"1600x300 (16:3)",width:1600,height:300},{label:"1600x450 (32:9)",width:1600,height:450},{label:"1600x900 (16:9)",width:1600,height:900},{label:"1920x360 (16:3)",width:1920,height:360},{label:"1920x540 (32:9)",width:1920,height:540},{label:"1920x1080 (16:9)",width:1920,height:1080}];function ve(){const[u,h]=g.useState(null),[i,s]=g.useState({size:p[0],title:"",subtitle:"",image:null,link:"",cta:{cta_1:{name:"",url:""},cta_2:{name:"",url:""}},is_active:!0,published_at:""}),d=t=>{const{name:a,type:l,checked:c,value:o}=t.target;s(m=>({...m,[a]:l==="checkbox"?c:o}))},f=t=>{if(h(null),!t){s(l=>({...l,image:null}));return}const a=new Image;a.onload=()=>{const{width:l,height:c}=a,o=i.size.width,m=i.size.height;l===o&&c===m?(s(x=>({...x,image:t})),h(null)):(h(`La imagen debe tener dimensiones exactas de ${o}x${m} px. La imagen seleccionada tiene ${l}x${c} px.`),s(x=>({...x,image:null})))},a.onerror=()=>{h("No se pudo validar la imagen seleccionada."),s(l=>({...l,image:null}))},a.src=URL.createObjectURL(t)},w=t=>{s(a=>({...a,is_active:t}))},v=t=>{t.preventDefault();const a=new FormData;Object.entries(i).forEach(([l,c])=>{l!=="is_active"&&c!==null&&a.append(l,c)}),a.append("cta",JSON.stringify(i.cta)),a.append("is_active",i.is_active?"1":"0"),a.append("width",i.size.width.toString()),a.append("height",i.size.height.toString()),_.post("/admin/banners",a,{forceFormData:!0})};return e.jsxs(C,{breadcrumbs:k,children:[e.jsx(N,{title:"Crear nuevo banner"}),e.jsxs("div",{className:"flex-1 space-y-6 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Crear Banner"}),e.jsx("p",{className:"text-muted-foreground",children:"Administra todos los banners desde aquí."})]}),e.jsx(y,{type:"submit",form:"banner-form",children:"Guardar"})]}),e.jsxs("form",{onSubmit:v,id:"banner-form",className:"flex flex-col 2xl:flex-row gap-8",children:[e.jsx(b,{className:"w-full 2xl:w-7/9",children:e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"size",children:"Dimensión del banner"}),e.jsx("select",{id:"size",name:"size",value:i.size.label,onChange:t=>{const a=p.find(l=>l.label===t.target.value);a&&(s(l=>({...l,size:a})),s(l=>({...l,image:null})),h(null))},className:"w-full rounded border px-3 py-2",children:p.map(({label:t})=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(r,{htmlFor:"image",className:"hidden",children:"Imagen"}),e.jsxs("div",{className:"flex w-full gap-2",children:[e.jsxs("div",{className:"w-5/9",children:[e.jsx(F,{image:i.image,onImageChange:f,collectionName:"banners_covers",title:"Portada del banner",description:"Imagen principal que aparecerá en el listado"}),u&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:u}),i.image&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Archivo seleccionado: ",i.image.name]})]}),e.jsxs("div",{className:"w-4/9 space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"title",children:"Título"}),e.jsx(n,{id:"title",name:"title",value:i.title,onChange:d,placeholder:"Título del banner",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subtitle",children:"Subtítulo"}),e.jsx(n,{id:"subtitle",name:"subtitle",value:i.subtitle,onChange:d,placeholder:"Subtítulo del banner"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"link",children:"Enlace"}),e.jsx(n,{id:"link",name:"link",type:"url",value:i.link,onChange:d,placeholder:"https://ejemplo.com"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(r,{htmlFor:"cta_1",children:"Nombre"}),e.jsx(n,{className:"w-full",value:i.cta.cta_1.name,onChange:t=>s(a=>({...a,cta:{...a.cta,cta_1:{...a.cta.cta_1,name:t.target.value}}}))})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(r,{htmlFor:"url_1",children:"Enlace"}),e.jsx(n,{className:"w-full",value:i.cta.cta_1.url,onChange:t=>s(a=>({...a,cta:{...a.cta,cta_1:{...a.cta.cta_1,url:t.target.value}}}))})]})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(r,{htmlFor:"cta2",children:"Nombre"}),e.jsx(n,{className:"w-full",value:i.cta.cta_2.name,onChange:t=>s(a=>({...a,cta:{...a.cta,cta_2:{...a.cta.cta_2,name:t.target.value}}}))})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(r,{htmlFor:"url_2",children:"Enlace"}),e.jsx(n,{className:"w-full",value:i.cta.cta_2.url,onChange:t=>s(a=>({...a,cta:{...a.cta,cta_2:{...a.cta.cta_2,url:t.target.value}}}))})]})]})]})]})]})})}),e.jsx("div",{className:"w-full 2xl:w-2/9",children:e.jsxs(b,{className:"space-y-4",children:[e.jsx(z,{children:e.jsx(I,{children:"Opciones"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"published_at",children:"Fecha de publicación"}),e.jsx(n,{id:"published_at",name:"published_at",type:"datetime-local",value:i.published_at,onChange:d})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"is_active",children:"Activo"}),e.jsx(S,{id:"is_active",checked:i.is_active,onCheckedChange:w})]})]})]})})]})]})]})}export{ve as default};
