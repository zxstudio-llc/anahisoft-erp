import{r as o,j as e,H as z,L as u,a as D,b as _}from"./app-DQczwFTk.js";import{B as r}from"./button-BYXnJyXv.js";import{C as j,a as p,b as g,c as f,d as N,e as L}from"./card-BNPG6E-E.js";import{B as d}from"./badge-CIPxAGrn.js";import{D as B,a as T,b as k,c as H,d as V,e as M,f as R}from"./dialog-DHq7tLZ5.js";import{I as q}from"./input-goWATpHJ.js";import{L as y}from"./label-BchK1h47.js";import{S as U,a as $,b as G,c as O,d as m}from"./select-D52pRjk-.js";import{t as F}from"./index-Cou6Ygo0.js";import{A as J}from"./arrow-left-BLAf5pk1.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BfMh8EvQ.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";function Se({payment:s}){const[w,x]=o.useState(!1),[h,v]=o.useState({status:s.status,notes:s.notes||""}),[c,b]=o.useState({}),[C,S]=o.useState(!1),P=a=>{const{name:t,value:i}=a.target;v(n=>({...n,[t]:i}))},E=(a,t)=>{v(i=>({...i,[a]:t}))},I=async a=>{var t,i;a.preventDefault(),S(!0),b({});try{await _.post(route("admin.payments.update-status",s.id),h),x(!1),F.success("Estado del pago actualizado correctamente"),D.reload()}catch(n){_.isAxiosError(n)&&((i=(t=n.response)==null?void 0:t.data)!=null&&i.errors)&&b(n.response.data.errors),F.error("Error al actualizar el estado del pago")}finally{S(!1)}},A=a=>{switch(a){case"completed":return e.jsx(d,{className:"bg-green-500",children:"Completado"});case"pending":return e.jsx(d,{className:"bg-yellow-500",children:"Pendiente"});case"failed":return e.jsx(d,{className:"bg-red-500",children:"Fallido"});case"refunded":return e.jsx(d,{className:"bg-blue-500",children:"Reembolsado"});default:return e.jsx(d,{children:a})}},l=a=>a?new Date(a).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:`Pago #${s.id}`}),e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(u,{href:route("admin.payments.index"),children:e.jsx(r,{variant:"outline",size:"icon",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsxs("h1",{className:"text-3xl font-bold",children:["Detalles del Pago #",s.id]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Información del Pago"}),e.jsx(f,{children:"Detalles completos del pago registrado."})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"ID del Pago"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:s.id})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Estado"}),e.jsx("div",{className:"mt-1",children:A(s.status)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Inquilino"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:e.jsx(u,{href:route("admin.tenants.subscription",s.tenant.id),className:"text-blue-600 hover:underline",children:s.tenant.data.company_name||s.tenant.id})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Plan de Suscripción"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:s.subscription_plan.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto"}),e.jsxs("p",{className:"mt-1 text-lg font-medium",children:["$",parseFloat(s.amount).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Método de Pago"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:s.payment_method==="credit_card"?"Tarjeta de Crédito":s.payment_method==="bank_transfer"?"Transferencia Bancaria":s.payment_method==="paypal"?"PayPal":s.payment_method==="cash"?"Efectivo":s.payment_method})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Fecha de Pago"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:l(s.payment_date)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Período de Facturación"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:s.billing_period==="monthly"?"Mensual":"Anual"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:s.notes||"Sin notas"})]})]})})]}),e.jsxs(j,{className:"mt-6",children:[e.jsxs(p,{children:[e.jsx(g,{children:"Período de Suscripción"}),e.jsx(f,{children:"Información sobre el período de suscripción asociado a este pago."})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Fecha de Inicio"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:l(s.subscription_starts_at)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Fecha de Finalización"}),e.jsx("p",{className:"mt-1 text-lg font-medium",children:l(s.subscription_ends_at)})]})]})})]})]}),e.jsx("div",{children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Acciones"}),e.jsx(f,{children:"Gestione el estado del pago."})]}),e.jsxs(N,{children:[e.jsxs(B,{open:w,onOpenChange:x,children:[e.jsx(T,{asChild:!0,children:e.jsx(r,{className:"w-full mb-4",children:"Actualizar Estado"})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:I,children:[e.jsxs(H,{children:[e.jsx(V,{children:"Actualizar Estado del Pago"}),e.jsx(M,{children:"Cambie el estado del pago y añada notas adicionales si es necesario."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"status",children:"Estado"}),e.jsxs(U,{name:"status",value:h.status,onValueChange:a=>E("status",a),children:[e.jsx($,{children:e.jsx(G,{placeholder:"Seleccione un estado"})}),e.jsxs(O,{children:[e.jsx(m,{value:"completed",children:"Completado"}),e.jsx(m,{value:"pending",children:"Pendiente"}),e.jsx(m,{value:"failed",children:"Fallido"}),e.jsx(m,{value:"refunded",children:"Reembolsado"})]})]}),c.status&&e.jsx("p",{className:"text-red-500 text-sm",children:c.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"notes",children:"Notas"}),e.jsx(q,{id:"notes",name:"notes",value:h.notes,onChange:P,placeholder:"Notas adicionales sobre el pago"}),c.notes&&e.jsx("p",{className:"text-red-500 text-sm",children:c.notes})]})]}),e.jsxs(R,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(r,{type:"submit",disabled:C,children:C?"Actualizando...":"Actualizar Estado"})]})]})})]}),e.jsx(u,{href:route("admin.tenants.subscription",s.tenant.id),className:"w-full",children:e.jsx(r,{variant:"outline",className:"w-full mb-4",children:"Ver Suscripción del Inquilino"})}),e.jsx(r,{variant:"outline",className:"w-full",onClick:()=>{D.visit(route("admin.payments.index"))},children:"Volver a la Lista"})]}),e.jsxs(L,{className:"flex flex-col items-start border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información Adicional"}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1 w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Creado:"}),e.jsx("span",{children:l(s.created_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Actualizado:"}),e.jsx("span",{children:l(s.updated_at)})]})]})]})]})})]})]})]})}export{Se as default};
