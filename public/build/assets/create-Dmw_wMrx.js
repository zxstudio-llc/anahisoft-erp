import{u as F,r as m,j as e,H as S}from"./app-DQczwFTk.js";import{A as q}from"./app-layout-CxNCz1W0.js";import{B as p}from"./button-BYXnJyXv.js";import{I as d}from"./input-goWATpHJ.js";import{L as i}from"./label-BchK1h47.js";import{S as x}from"./switch-x9PZ-zT7.js";import{S as h,a as u,b as j,c as v,d as _}from"./select-D52pRjk-.js";import"./app-C-su-A41.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-CX1ZUDb2.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BfMh8EvQ.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./card-BNPG6E-E.js";import"./index-7Ou4doz_.js";import"./chevron-down-Bqmppv4h.js";const I=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/users"},{title:"Crear usuario",href:"/admin/users/create"}];function ge({roles:l,existingProviders:f}){const{data:t,setData:a,post:g,processing:c,errors:r}=F({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",phone:"",image:null,status:!0,address:"",gender:"",date_of_birth:"",subscribed_to_news_letter:!1,dni:"",company_name:"",company_address:"",role_id:"",provider_id:"",is_new_provider:!1}),[N,C]=m.useState(!1),[n,y]=m.useState(!1);m.useEffect(()=>{const s=l.find(o=>o.id.toString()===t.role_id);C((s==null?void 0:s.name)==="Provider")},[t.role_id]);const w=s=>{var o;a("image",((o=s.target.files)==null?void 0:o[0])||null)},b=s=>{s.preventDefault(),g(route("admin.users.store"),{forceFormData:!0,onError:o=>{console.error("Errores en el formulario:",o)}})};return e.jsxs(q,{breadcrumbs:I,children:[e.jsx(S,{title:"Crear nuevo usuario"}),e.jsxs("div",{className:"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Crear nuevo usuario"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete los datos del nuevo usuario"})]})}),e.jsx("div",{className:"rounded-md border p-6",children:e.jsxs("form",{onSubmit:b,encType:"multipart/form-data",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"role_id",children:"Rol*"}),e.jsxs(h,{value:t.role_id,onValueChange:s=>a("role_id",s),children:[e.jsx(u,{children:e.jsx(j,{placeholder:"Seleccione un rol"})}),e.jsx(v,{children:l.map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]}),r.role_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.role_id})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"first_name",children:"Nombre*"}),e.jsx(d,{id:"first_name",value:t.first_name,onChange:s=>a("first_name",s.target.value),className:"mt-1",required:!0}),r.first_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.first_name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"last_name",children:"Apellido*"}),e.jsx(d,{id:"last_name",value:t.last_name,onChange:s=>a("last_name",s.target.value),className:"mt-1",required:!0}),r.last_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.last_name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email*"}),e.jsx(d,{id:"email",type:"email",value:t.email,onChange:s=>a("email",s.target.value),className:"mt-1",required:!0}),r.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",children:"Teléfono"}),e.jsx(d,{id:"phone",value:t.phone,onChange:s=>a("phone",s.target.value),className:"mt-1"}),r.phone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.phone})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Contraseña*"}),e.jsx(d,{id:"password",type:"password",value:t.password,onChange:s=>a("password",s.target.value),className:"mt-1",required:!0}),r.password&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.password})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password_confirmation",children:"Confirmar contraseña*"}),e.jsx(d,{id:"password_confirmation",type:"password",value:t.password_confirmation,onChange:s=>a("password_confirmation",s.target.value),className:"mt-1",required:!0})]}),N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2 border-t pt-4",children:e.jsx("h3",{className:"text-lg font-medium",children:"Información del Proveedor"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:"is_new_provider",checked:n,onCheckedChange:s=>{y(s),a("is_new_provider",s),a("provider_id","")}}),e.jsx(i,{htmlFor:"is_new_provider",children:"Crear nuevo proveedor"})]})})}),n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"dni",children:"DNI*"}),e.jsx(d,{id:"dni",value:t.dni,onChange:s=>a("dni",s.target.value),className:"mt-1",required:n}),r.dni&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.dni})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"company_name",children:"Nombre de la empresa*"}),e.jsx(d,{id:"company_name",value:t.company_name,onChange:s=>a("company_name",s.target.value),className:"mt-1",required:n}),r.company_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.company_name})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"company_address",children:"Dirección de la empresa*"}),e.jsx(d,{id:"company_address",value:t.company_address,onChange:s=>a("company_address",s.target.value),className:"mt-1",required:n}),r.company_address&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.company_address})]})]}):e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"provider_id",children:"Proveedor existente"}),e.jsxs(h,{value:t.provider_id,onValueChange:s=>a("provider_id",s),children:[e.jsx(u,{children:e.jsx(j,{placeholder:"Seleccione un proveedor existente"})}),e.jsx(v,{children:f.map(s=>e.jsxs(_,{value:s.id.toString(),children:[s.company_name," (DNI: ",s.dni,")"]},s.id))})]}),r.provider_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.provider_id})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"image",children:"Imagen de perfil"}),e.jsx(d,{id:"image",type:"file",onChange:w,className:"mt-1",accept:"image/*"}),r.image&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.image})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:"status",checked:t.status,onCheckedChange:s=>a("status",s)}),e.jsx(i,{htmlFor:"status",children:"Usuario activo"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancelar"}),e.jsx(p,{type:"submit",disabled:c,children:c?"Creando...":"Crear usuario"})]})]})})]})]})}export{ge as default};
