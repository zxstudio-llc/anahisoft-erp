import{r as d,j as e}from"./app-DQczwFTk.js";import{B as z}from"./badge-CIPxAGrn.js";import{B as m}from"./button-BYXnJyXv.js";import{C as se,d as ae}from"./card-BNPG6E-E.js";import{I}from"./input-goWATpHJ.js";import{L as b}from"./label-BchK1h47.js";import{S as W,a as G,b as X,c as Q,d as L}from"./select-D52pRjk-.js";import{S as re}from"./separator-Dm1V7ums.js";import{S as ne}from"./switch-x9PZ-zT7.js";import{A as ce,S as F,P as H}from"./app-sidebar-layout-DjIGW_b8.js";import{f as u}from"./utils-CPN-yreq.js";import{A as T}from"./api-DdUbHrO8.js";import{t as o}from"./index-Cou6Ygo0.js";import{D as de,b as me,c as xe,d as he}from"./dialog-DHq7tLZ5.js";import{T as Z}from"./textarea-DHAakLHN.js";import{C as pe}from"./circle-check-big-DhhsJsf9.js";import{X as ue}from"./x-CNv1352c.js";import{D as fe}from"./download-DcYaHDKt.js";import{F as R}from"./file-text-mqHhLRuK.js";import{M as J}from"./mail-OHpVa5Fe.js";import{c as te}from"./createLucideIcon-D40S4Mwt.js";import{P as je}from"./printer-D8W0eBr-.js";import{S as ge}from"./search-DPYN2drD.js";import{R as ve}from"./receipt-BIwab1oI.js";import{T as K}from"./trash-2-b2Qe_qpo.js";import{U as Y}from"./user-Sh9zbuY1.js";import{M as Ne}from"./minus-BMdB-xSG.js";import{P as be}from"./plus-BGuKkasZ.js";import{C as ye}from"./credit-card-DX0EPogz.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-BBPPPnEU.js";import"./index-BfMh8EvQ.js";import"./index-KJ4lOR0W.js";import"./index-DSuT5VJt.js";import"./index-CqVE9Fls.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";import"./index-DcW1-0jE.js";import"./index-BVHM8iLO.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./folder-BRrK2jGA.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./app-logo-icon-2MFPo7KO.js";import"./toast-lvG1LsW6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ce=te("Calculator",we);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ee=te("MessageCircle",Se);function ke({isOpen:C,onClose:S,sale:a,canDownloadPdf:x,canDownloadXml:n,canDownloadCdr:y}){var E,v;const[f,k]=d.useState({email:((E=a==null?void 0:a.client)==null?void 0:E.email)||"",message:""}),[j,_]=d.useState({phone:((v=a==null?void 0:a.client)==null?void 0:v.phone)||"",message:""}),[g,h]=d.useState(!1),w=async l=>{try{h(!0);const P=(await T.get(`/v1/sales/${a.id}/download-${l}`,{responseType:"blob"})).data,A=window.URL.createObjectURL(new Blob([P])),N=document.createElement("a");N.href=A,N.setAttribute("download",`comprobante-${a.document_number}.${l==="cdr"?"zip":l}`),document.body.appendChild(N),N.click(),N.remove(),window.URL.revokeObjectURL(A),o.success(`Archivo ${l.toUpperCase()} descargado correctamente`)}catch(c){console.error("Error downloading file:",c),o.error(`Error al descargar el archivo ${l.toUpperCase()}`)}finally{h(!1)}},M=async()=>{if(!f.email){o.error("Ingresa un correo electrónico");return}try{h(!0),await T.post(`/v1/sales/${a.id}/send-email`,f),o.success("Comprobante enviado por correo electrónico"),k({email:"",message:""})}catch(l){console.error("Error sending email:",l),o.error("Error al enviar el correo electrónico")}finally{h(!1)}},$=async()=>{if(!j.phone){o.error("Ingresa un número de teléfono");return}try{h(!0);const c=(await T.post(`/v1/sales/${a.id}/whatsapp-link`,j)).data;window.open(c.whatsapp_url,"_blank"),o.success("Enlace de WhatsApp generado"),_({phone:"",message:""})}catch(l){console.error("Error generating WhatsApp link:",l),o.error("Error al generar enlace de WhatsApp")}finally{h(!1)}};return a?e.jsx(de,{open:C,onOpenChange:S,children:e.jsxs(me,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-green-100 p-2",children:e.jsx(pe,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(he,{className:"text-xl",children:"¡Venta Procesada Exitosamente!"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.document_type_name," ",a.document_number]})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:S,className:"ml-auto",children:e.jsx(ue,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(se,{children:e.jsxs(ae,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliente"}),e.jsx("p",{className:"font-medium",children:a.client.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.client.document_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:u(a.total)}),e.jsx(z,{variant:a.sunat_state==="ACEPTADO"?"default":"secondary",className:"mt-1",children:a.sunat_state})]})]}),e.jsx(re,{className:"my-3"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("p",{className:"font-medium",children:u(a.subtotal)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"IGV"}),e.jsx("p",{className:"font-medium",children:u(a.igv)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total"}),e.jsx("p",{className:"font-medium",children:u(a.total)})]})]})]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold mb-3",children:[e.jsx(fe,{className:"h-5 w-5"}),"Descargar Archivos"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(m,{variant:"outline",onClick:()=>w("pdf"),disabled:!x||g,className:"flex flex-col gap-2 h-auto py-4",children:[e.jsx(R,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"PDF"})]}),e.jsxs(m,{variant:"outline",onClick:()=>w("xml"),disabled:!n||g,className:"flex flex-col gap-2 h-auto py-4",children:[e.jsx(R,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"XML"})]}),e.jsxs(m,{variant:"outline",onClick:()=>w("cdr"),disabled:!y||g,className:"flex flex-col gap-2 h-auto py-4",children:[e.jsx(R,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"CDR"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold mb-3",children:[e.jsx(J,{className:"h-5 w-5"}),"Enviar por Correo"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",children:"Correo electrónico"}),e.jsx(I,{id:"email",type:"email",placeholder:"correo@ejemplo.com",value:f.email,onChange:l=>k(c=>({...c,email:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email-message",children:"Mensaje (opcional)"}),e.jsx(Z,{id:"email-message",placeholder:"Mensaje personalizado...",value:f.message,onChange:l=>k(c=>({...c,message:l.target.value})),rows:3})]}),e.jsxs(m,{onClick:M,disabled:!f.email||g,className:"w-full",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Enviar por Correo"]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold mb-3",children:[e.jsx(ee,{className:"h-5 w-5"}),"Enviar por WhatsApp"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phone",children:"Número de teléfono"}),e.jsx(I,{id:"phone",type:"tel",placeholder:"+51 999 999 999",value:j.phone,onChange:l=>_(c=>({...c,phone:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"whatsapp-message",children:"Mensaje (opcional)"}),e.jsx(Z,{id:"whatsapp-message",placeholder:"Mensaje personalizado...",value:j.message,onChange:l=>_(c=>({...c,message:l.target.value})),rows:3})]}),e.jsxs(m,{onClick:$,disabled:!j.phone||g,className:"w-full",variant:"outline",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Abrir WhatsApp"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(m,{variant:"outline",onClick:()=>window.print(),className:"flex-1",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Imprimir"]}),e.jsx(m,{onClick:S,className:"flex-1",children:"Finalizar"})]})]})]})}):null}function _s({clients:C,products:S}){const[a,x]=d.useState({client_id:"",products:[],document_type:"01",is_electronic:!0}),[n,y]=d.useState([]),[f,k]=d.useState({subtotal:0,igv:0,total:0}),[j,_]=d.useState(""),[g,h]=d.useState(null),[w,M]=d.useState(!1),[$,E]=d.useState(!1),[v,l]=d.useState(null),c=[{title:"Inicio",href:"/"},{title:"Ventas",href:"/sales"},{title:"Nueva Venta",href:"/sales/create"}],P=d.useCallback(()=>{let s=0,t=0,r=0;n.forEach(i=>{var U;const p=((U=a.products.find(oe=>oe.id===i.id))==null?void 0:U.quantity)||0,D=i.price||0,O=D/1.18,ie=D-O;s+=O*p,t+=ie*p,r+=D*p}),k({subtotal:s,igv:t,total:r})},[n,a.products]);d.useEffect(()=>{P()},[P]),d.useEffect(()=>{if(a.client_id){const s=C.find(t=>t.id.toString()===a.client_id);h(s||null)}else h(null)},[a.client_id,C]);const A=s=>{const t=a.products.findIndex(r=>r.id===s.id);if(t>=0){if(a.products[t].quantity>=s.stock){o.error("Stock insuficiente",{description:`Solo hay ${s.stock} unidades disponibles de ${s.name}`});return}x(i=>({...i,products:i.products.map((p,D)=>D===t?{...p,quantity:p.quantity+1}:p)})),o.success(`Cantidad actualizada: ${s.name}`,{description:`Nueva cantidad: ${a.products[t].quantity+1}`})}else{if(s.stock<=0){o.error("Sin stock",{description:`No hay unidades disponibles de ${s.name}`});return}x(r=>({...r,products:[...r.products,{id:s.id,quantity:1}]})),y(r=>[...r,s]),o.success(`Producto agregado: ${s.name}`,{description:"El producto se ha añadido al carrito"})}},N=(s,t)=>{if(t<=0){V(s);return}x(r=>({...r,products:r.products.map(i=>i.id===s?{...i,quantity:t}:i)}))},V=s=>{const t=n.find(r=>r.id===s);x(r=>({...r,products:r.products.filter(i=>i.id!==s)})),y(r=>r.filter(i=>i.id!==s)),t&&o.info(`Producto eliminado: ${t.name}`,{description:"El producto se ha removido del carrito"})},q=S.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())||s.id.toString().includes(j)),le=()=>{const s=n.length;x(t=>({...t,products:[]})),y([]),s>0&&o.info("Carrito limpiado",{description:`Se eliminaron ${s} producto${s!==1?"s":""} del carrito`})},B=async s=>{var t;if(s.preventDefault(),!a.client_id){o.error("Selecciona un cliente para continuar");return}if(n.length===0){o.error("Agrega al menos un producto al carrito");return}M(!0),o.loading("Procesando venta...",{id:"sale-processing"});try{const r=await T.post("/v1/sales",a);o.success("¡Venta procesada exitosamente!",{id:"sale-processing",description:"La venta ha sido registrada correctamente"});const i=r.data;l(i.data),E(!0),x({client_id:"",products:[],document_type:"01",is_electronic:!0}),y([]),h(null)}catch(r){console.error("Error al procesar la venta:",r);let i="Error desconocido al procesar la venta";r&&typeof r=="object"&&"response"in r?i=((t=r.response.data)==null?void 0:t.message)||"Error en el servidor":r instanceof Error&&(i=r.message),o.error("Error al procesar la venta",{id:"sale-processing",description:i})}finally{M(!1)}};return e.jsxs(ce,{breadcrumbs:c,children:[e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-1 gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-1 flex-col rounded-lg border bg-card",children:[e.jsxs("div",{className:"border-b p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(F,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Punto de Venta"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona productos para agregar a la venta"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(I,{placeholder:"Buscar productos por nombre o código...",value:j,onChange:s=>_(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:q.map(s=>e.jsx(se,{className:"group cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 hover:-translate-y-1",onClick:()=>A(s),children:e.jsx(ae,{className:"p-4 relative overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3 text-center relative z-10",children:[e.jsx("div",{className:"rounded-full bg-gradient-to-br from-primary/10 to-primary/20 p-3 transition-all duration-200 group-hover:scale-110 group-hover:from-primary/20 group-hover:to-primary/30",children:e.jsx(H,{className:"h-6 w-6 text-primary transition-transform duration-200 group-hover:rotate-12"})}),e.jsx("h3",{className:"line-clamp-2 min-h-[2.5rem] text-sm font-medium transition-colors duration-200 group-hover:text-primary",children:s.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-bold text-foreground transition-all duration-200 group-hover:scale-105",children:u(s.price)}),e.jsxs(z,{variant:"secondary",className:"text-xs transition-all duration-200 group-hover:bg-primary/10 group-hover:text-primary",children:["Stock: ",s.stock||"N/A"]})]})]})})},s.id))}),q.length===0&&e.jsxs("div",{className:"flex h-64 flex-col items-center justify-center text-muted-foreground",children:[e.jsx(H,{className:"mb-4 h-12 w-12"}),e.jsx("p",{children:"No se encontraron productos"})]})]})]}),e.jsx("div",{className:"flex w-96 flex-col rounded-lg border bg-card",children:e.jsxs("form",{onSubmit:B,className:"flex h-full flex-col",children:[e.jsxs("div",{className:"border-b p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(ve,{className:"h-5 w-5 text-primary"})}),e.jsx("h2",{className:"text-xl font-semibold",children:"Carrito de Compras"})]}),n.length>0&&e.jsxs(m,{type:"button",variant:"ghost",size:"sm",onClick:le,className:"text-destructive hover:bg-destructive/10 hover:text-destructive",children:[e.jsx(K,{className:"mr-1 h-4 w-4"}),"Limpiar"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Y,{className:"h-4 w-4"}),"Cliente"]}),e.jsxs(W,{value:a.client_id,onValueChange:s=>x(t=>({...t,client_id:s})),children:[e.jsx(G,{className:"h-auto min-h-[40px] py-2",children:e.jsx(X,{placeholder:"Seleccionar cliente",children:g&&e.jsxs("div",{className:"flex flex-col items-start text-left w-full",children:[e.jsx("span",{className:"font-medium text-sm truncate w-full",children:g.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:g.document_number})]})})}),e.jsx(Q,{className:"max-w-[300px]",children:C.map(s=>e.jsx(L,{value:s.id.toString(),className:"py-3",children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("span",{className:"font-medium text-sm",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.document_number})]})},s.id))})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"PRODUCTOS SELECCIONADOS"}),n.length>0&&e.jsxs(z,{variant:"secondary",children:[n.length," ",n.length===1?"producto":"productos"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:n.length===0?e.jsxs("div",{className:"flex h-32 flex-col items-center justify-center text-muted-foreground animate-in fade-in duration-500",children:[e.jsx("div",{className:"rounded-full bg-muted/50 p-4 mb-3 animate-pulse",children:e.jsx(F,{className:"h-8 w-8"})}),e.jsx("p",{className:"text-sm font-medium",children:"Carrito vacío"}),e.jsx("p",{className:"text-xs",children:"Selecciona productos para agregar"})]}):e.jsx("div",{className:"space-y-3 py-4",children:n.map(s=>{const t=a.products.find(p=>p.id===s.id),r=(t==null?void 0:t.quantity)||0,i=s.price*r;return e.jsxs("div",{className:"group rounded-lg border bg-white p-3 transition-all duration-200 hover:shadow-md hover:border-primary/20",children:[e.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[e.jsx("h4",{className:"line-clamp-2 flex-1 text-sm font-medium transition-colors duration-200 group-hover:text-primary",children:s.name}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",onClick:()=>V(s.id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 hover:scale-110",children:e.jsx(K,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>N(s.id,r-1),className:"h-7 w-7 p-0 transition-all duration-200 hover:scale-110 hover:bg-primary/10 hover:border-primary/30",children:e.jsx(Ne,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-10 text-center text-sm font-bold bg-muted/30 rounded px-2 py-1 transition-all duration-200",children:r}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>N(s.id,r+1),className:"h-7 w-7 p-0 transition-all duration-200 hover:scale-110 hover:bg-primary/10 hover:border-primary/30",children:e.jsx(be,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[u(s.price)," c/u"]}),e.jsx("p",{className:"text-sm font-bold text-primary transition-all duration-200 group-hover:scale-105",children:u(i)})]})]})]},s.id)})})})]}),e.jsx("div",{className:"border-t border-b p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx(b,{className:"text-sm font-medium",children:"Tipo de Comprobante"})]}),e.jsxs(W,{value:a.document_type,onValueChange:s=>x(t=>({...t,document_type:s})),children:[e.jsx(G,{children:e.jsx(X,{})}),e.jsxs(Q,{children:[e.jsx(L,{value:"01",children:"Factura Electrónica"}),e.jsx(L,{value:"03",children:"Boleta Electrónica"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm",children:"Comprobante Electrónico"}),e.jsx(ne,{checked:a.is_electronic,onCheckedChange:s=>x(t=>({...t,is_electronic:s}))})]})]})}),e.jsx("div",{className:"border-t p-4 bg-gradient-to-r from-muted/30 to-muted/10",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Subtotal:"}),e.jsx("span",{className:"font-semibold",children:u(f.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"IGV (18%):"}),e.jsx("span",{className:"font-semibold",children:u(f.igv)})]}),e.jsx(re,{className:"my-3"}),e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-primary/5 border border-primary/20",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:"Total:"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:u(f.total)})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(m,{className:"w-full h-12 text-base font-semibold",disabled:n.length===0||!a.client_id||w,onClick:B,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-5 w-5 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-5 w-5"}),"Procesar Venta"]})}),n.length>0&&!a.client_id&&e.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Selecciona un cliente para continuar"})]}),n.length>0&&e.jsxs(m,{variant:"outline",className:"w-full h-11 text-base font-medium transition-all duration-200 hover:bg-primary/5 hover:border-primary/30 hover:text-primary",onClick:()=>console.log("Guardar como borrador"),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Guardar Borrador"]})]})]})})]})}),v&&e.jsx(ke,{isOpen:$,onClose:()=>{E(!1),l(null)},sale:v.sale,canDownloadPdf:v.can_download_pdf,canDownloadXml:v.can_download_xml,canDownloadCdr:v.can_download_cdr})]})}export{_s as default};
