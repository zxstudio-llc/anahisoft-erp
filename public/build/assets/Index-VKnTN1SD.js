import{j as e,d as X,r as c,a as R,H as ie}from"./app-DQczwFTk.js";import{C as A,a as B,c as Y,b as L,d as Q}from"./card-BNPG6E-E.js";import{B as b}from"./button-BYXnJyXv.js";import{D as te,a as le,b as de,c as T}from"./dropdown-menu-DWIT9g2E.js";import{D as V,b as U,c as $,d as O,e as P,f as G,a as ce}from"./dialog-DHq7tLZ5.js";import{I as p}from"./input-goWATpHJ.js";import{L as m}from"./label-BchK1h47.js";import{t as W}from"./index-Cou6Ygo0.js";import{B as I}from"./building-2-BYnHBy7Y.js";import{A as oe}from"./api-DdUbHrO8.js";import{C as me}from"./circle-plus-BkaJThET.js";import{C as xe}from"./circle-check-X4JMQIil.js";import{E as ue}from"./external-link-sBsljvUk.js";import{L as pe}from"./loader-circle-0WVi89tk.js";import{U as he}from"./user-Sh9zbuY1.js";import{E as je}from"./ellipsis-YiHoVY6K.js";import{S as ge}from"./square-pen-NJFtVg51.js";import{C as fe}from"./credit-card-DX0EPogz.js";import{K as ve}from"./key-aou-cbKc.js";import{A as Ne}from"./app-layout-CxNCz1W0.js";import{U as be}from"./app-sidebar-layout-DjIGW_b8.js";import"./app-C-su-A41.js";import"./utils-CPN-yreq.js";import"./index-D2mu7mBH.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-BfMh8EvQ.js";import"./index-DSuT5VJt.js";import"./index-CqVE9Fls.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BVHM8iLO.js";import"./index-CJpv9kZ5.js";import"./index-DcW1-0jE.js";import"./x-CNv1352c.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./toast-lvG1LsW6.js";import"./cookie-consent-DYpW6VIi.js";import"./index-CX1ZUDb2.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";function we({stats:t}){const g=[{title:"Total de inquilinos",value:t.total,icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:[e.jsx("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),e.jsx("path",{fillRule:"evenodd",d:"M20.25 10.332v9.918H21a.75.75 0 010 1.5H3a.75.75 0 010-1.5h.75v-9.918a.75.75 0 01.634-.74A49.109 49.109 0 0112 9c2.59 0 5.134.202 7.616.592a.75.75 0 01.634.74zm-7.5 2.418a.75.75 0 00-1.5 0v6.75a.75.75 0 001.5 0v-6.75zm3-.75a.75.75 0 01.75.75v6.75a.75.75 0 01-1.5 0v-6.75a.75.75 0 01.75-.75zM9 12.75a.75.75 0 00-1.5 0v6.75a.75.75 0 001.5 0v-6.75z",clipRule:"evenodd"})]})},{title:"Activos último mes",value:t.active_last_month,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})})},{title:"Múltiples dominios",value:t.with_multiple_domains,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{d:"M21.721 12.752a9.711 9.711 0 00-.945-5.003 12.754 12.754 0 01-4.339 2.708 18.991 18.991 0 01-.214 4.772 17.165 17.165 0 005.498-2.477zM14.634 15.55a17.324 17.324 0 00.332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 00.332 4.647 17.385 17.385 0 005.268 0zM9.772 17.119a18.963 18.963 0 004.456 0A17.182 17.182 0 0112 21.724a17.18 17.18 0 01-2.228-4.605zM7.777 15.23a18.87 18.87 0 01-.214-4.774 12.753 12.753 0 01-4.34-2.708 9.711 9.711 0 00-.944 5.004 17.165 17.165 0 005.498 2.477zM21.356 14.752a9.765 9.765 0 01-7.478 6.817 18.64 18.64 0 001.988-4.718 18.627 18.627 0 005.49-2.098zM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 001.988 4.718 9.765 9.765 0 01-7.478-6.816zM13.878 2.43a9.755 9.755 0 016.116 3.986 11.267 11.267 0 01-3.746 2.504 18.63 18.63 0 00-2.37-6.49zM12 2.276a17.152 17.152 0 012.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0112 2.276zM10.122 2.43a18.629 18.629 0 00-2.37 6.49 11.266 11.266 0 01-3.746-2.504 9.754 9.754 0 016.116-3.985z"})})},{title:"Nuevos este mes",value:t.created_this_month,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"})})}];return e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:g.map((h,u)=>e.jsx(A,{children:e.jsxs(B,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Y,{children:h.title}),e.jsx(L,{className:"text-2xl font-bold",children:h.value})]}),e.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary",children:h.icon})]})},u))})}function ye({tenant:t,isOpen:g,onClose:h}){const{errors:u}=X().props,[r,y]=c.useState({id:t.id,domain:t.primary_domain||"",company_name:t.company_name||""}),[s,f]=c.useState(u),[d,j]=c.useState(!1);c.useEffect(()=>{t&&y({id:t.id,domain:t.primary_domain||"",company_name:t.company_name||""})},[t]),c.useEffect(()=>{f(u)},[u]);const x=v=>{const{name:N,value:_}=v.target;y(S=>({...S,[N]:_})),s[N]&&f(S=>({...S,[N]:""}))},C=v=>{v.preventDefault(),j(!0),R.put(route("admin.tenants.update",t.id),r,{preserveScroll:!0,onSuccess:()=>{W.success("Inquilino actualizado correctamente"),h()},onError:N=>{W.error("Error al actualizar el inquilino"),f(N)},onFinish:()=>j(!1)})};return e.jsx(V,{open:g,onOpenChange:v=>!v&&h(),children:e.jsxs(U,{className:"sm:max-w-xl",children:[e.jsxs($,{children:[e.jsx(O,{children:"Editar Inquilino"}),e.jsx(P,{children:"Modifique la información del inquilino."})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.error&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 dark:bg-red-900/10",children:e.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:s.error})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-medium",children:"Información de la Empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"company_name",className:"text-sm font-medium",children:["Nombre de la Empresa ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"company_name",name:"company_name",value:r.company_name,onChange:x,placeholder:"Nombre de la empresa",disabled:d,className:"w-full",autoFocus:!0}),s.company_name&&e.jsx("p",{className:"text-sm text-red-500",children:s.company_name})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"id",className:"text-sm font-medium",children:"ID del Inquilino"}),e.jsx(p,{id:"id",name:"id",value:r.id,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"El ID no se puede modificar."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"domain",className:"text-sm font-medium",children:["Dominio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"domain",name:"domain",value:r.domain,onChange:x,placeholder:"mi-empresa.ejemplo.com",disabled:d,className:"w-full"}),s.domain&&e.jsx("p",{className:"text-sm text-red-500",children:s.domain}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"El dominio debe ser único."})]})]})]}),e.jsxs(G,{children:[e.jsx(b,{type:"button",variant:"secondary",onClick:h,disabled:d,children:"Cancelar"}),e.jsx(b,{type:"submit",disabled:d,children:d?"Guardando...":"Guardar Cambios"})]})]})]})})}function _e({domain:t}){const{props:g}=X(),[h,u]=c.useState(!1),[r,y]=c.useState(1),[s,f]=c.useState({id:"",domain:"",company_name:"",ruc:"",admin_name:"",admin_email:"",admin_password:"",status:"",condition:"",address:"",department:"",province:"",district:"",registration_date:"",trade_name:""}),[d,j]=c.useState({}),[x,C]=c.useState(!1),[v,N]=c.useState(!0),[_,S]=c.useState(!1),[M,z]=c.useState(!1),[a,w]=c.useState({show:!1,message:"",tenant:null});c.useEffect(()=>{g.success&&g.tenant&&(w({show:!0,message:g.message||"Inquilino creado correctamente",tenant:g.tenant}),u(!1),q(),R.reload({only:[]}))},[g]),c.useEffect(()=>{if(v&&s.company_name){const n=s.company_name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();f(l=>({...l,id:n,domain:`${n}.${t}`}))}},[s.company_name,v,t]);const k=async n=>{var l;if(n.length===13){S(!0);try{const o=await oe.get(`/v1/sris/${n}`);if(console.log(o),o.data.success&&o.data.data){const i=o.data.data,E=((l=i.establishments)==null?void 0:l[0])||{};f(ne=>{var J;return{...ne,ruc:i.identification,company_name:i.legal_name||i.business_name,business_name:i.legal_name||i.business_name,trade_name:i.legal_name||i.trade_name||"",status:i.status,condition:i.taxpayer_status,address:i.head_office_address||E.address,department:E.department||"",province:E.province||"",district:E.district||E.parish||"",registration_date:((J=i.taxpayer_dates)==null?void 0:J.start_date)||""}}),z(!0)}else f(i=>({...i,company_name:"",business_name:""})),j(i=>({...i,ruc:"RUC no válido o no encontrado"}))}catch(o){console.error("Error validating RUC:",o);const i=o instanceof Error?o.message:"Error validating RUC. Please try again.";j(E=>({...E,ruc:i}))}finally{S(!1)}}},F=n=>{const l=n.target.value.replace(/[^0-9]/g,"");f(o=>({...o,ruc:l})),z(!1),j(o=>({...o,ruc:""})),l.length===10||l.length===13?k(l):l.length>0&&j(o=>({...o,ruc:"El RUC debe tener 10 o 13 dígitos"}))},D=n=>{const{name:l,value:o}=n.target;f(i=>({...i,[l]:o})),(l==="id"||l==="domain")&&o!==""&&N(!1),d[l]&&j(i=>({...i,[l]:""}))},Z=()=>{r<3&&y(r+1)},K=()=>{r>1&&y(r-1)},ee=n=>{n.preventDefault(),C(!0),j({}),R.post(route("admin.tenants.store"),{id:s.id,domain:s.domain,company_name:s.company_name,ruc:s.ruc,admin_name:s.admin_name,admin_email:s.admin_email,admin_password:s.admin_password,status:s.status,condition:s.condition,address:s.address,department:s.department,province:s.province,district:s.district,registration_date:s.registration_date,trade_name:s.trade_name},{preserveScroll:!0,onSuccess:l=>{u(!1),q(),console.log("Tenant creado exitosamente")},onError:l=>{const o={};Object.keys(l).forEach(i=>{o[i]=Array.isArray(l[i])?l[i][0]:l[i]}),j(o)},onFinish:()=>{C(!1)}})},q=()=>{f({id:"",domain:"",company_name:"",ruc:"",admin_name:"",admin_email:"",admin_password:"",status:"",condition:"",address:"",department:"",province:"",district:"",registration_date:"",trade_name:""}),j({}),N(!0),z(!1),y(1)},se=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-medium",children:"Información de la Empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"ruc",className:"text-sm font-medium",children:["RUC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"ruc",name:"ruc",value:s.ruc,onChange:F,placeholder:"Número de RUC (13 dígitos)",disabled:x||_,className:`w-full ${M?"border-green-500":""}`,maxLength:13,autoFocus:!0}),_&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(pe,{className:"h-4 w-4 animate-spin text-primary"})})]}),d.ruc&&e.jsx("p",{className:"text-sm text-red-500",children:d.ruc}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ingrese el RUC de 13 dígitos de la empresa para validar los datos automáticamente."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"business_name",className:"text-sm font-medium",children:["Razón Social ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"business_name",name:"business_name",value:s.business_name,onChange:D,placeholder:"Razón social de la empresa",disabled:x||_||M,className:`w-full ${M?"bg-green-50 dark:bg-green-950/10":""}`}),d.business_name&&e.jsx("p",{className:"text-sm text-red-500",children:d.business_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"El ID y dominio se generarán automáticamente a partir del nombre."})]})]}),ae=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-medium",children:"Información Adicional"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"trade_name",className:"text-sm font-medium",children:"Nombre Comercial"}),e.jsx(p,{id:"trade_name",name:"trade_name",value:s.trade_name,onChange:D,placeholder:"Nombre comercial",disabled:x,className:"w-full"}),d.trade_name&&e.jsx("p",{className:"text-sm text-red-500",children:d.trade_name})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"status",className:"text-sm font-medium",children:"Estado"}),e.jsx(p,{id:"status",name:"status",value:s.status,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"condition",className:"text-sm font-medium",children:"Condición"}),e.jsx(p,{id:"condition",name:"condition",value:s.condition,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"address",className:"text-sm font-medium",children:"Dirección"}),e.jsx(p,{id:"address",name:"address",value:s.address,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"department",className:"text-sm font-medium",children:"Departamento"}),e.jsx(p,{id:"department",name:"department",value:s.department,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"province",className:"text-sm font-medium",children:"Provincia"}),e.jsx(p,{id:"province",name:"province",value:s.province,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"district",className:"text-sm font-medium",children:"Distrito"}),e.jsx(p,{id:"district",name:"district",value:s.district,disabled:!0,className:"w-full bg-neutral-50 dark:bg-neutral-800"})]})]})]}),re=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsx(he,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-medium",children:"Usuario Administrador"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"admin_name",className:"text-sm font-medium",children:["Nombre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"admin_name",name:"admin_name",value:s.admin_name,onChange:D,placeholder:"Nombre del administrador",disabled:x,className:"w-full"}),d.admin_name&&e.jsx("p",{className:"text-sm text-red-500",children:d.admin_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"admin_email",className:"text-sm font-medium",children:["Correo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"admin_email",name:"admin_email",type:"email",value:s.admin_email,onChange:D,placeholder:`admin@${t}`,disabled:x,className:"w-full"}),d.admin_email&&e.jsx("p",{className:"text-sm text-red-500",children:d.admin_email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"admin_password",className:"text-sm font-medium",children:["Contraseña ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{id:"admin_password",name:"admin_password",type:"password",value:s.admin_password,onChange:D,placeholder:"Contraseña",disabled:x,className:"w-full"}),d.admin_password&&e.jsx("p",{className:"text-sm text-red-500",children:d.admin_password}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mínimo 8 caracteres. El administrador podrá crear otros usuarios con diferentes roles."})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(V,{open:h,onOpenChange:n=>{u(n),n||q()},children:[e.jsx(ce,{asChild:!0,children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"New Tenant"})]})}),e.jsxs(U,{className:"sm:max-w-xl",children:[e.jsxs($,{children:[e.jsx(O,{children:"Crear Nuevo Inquilino"}),e.jsx(P,{children:"Ingrese la información para crear un nuevo inquilino y su dominio asociado."})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex justify-between items-center",children:[1,2,3].map(n=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r===n?"bg-indigo-600 text-white":r>n?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:r>n?"✓":n}),e.jsx("div",{className:"text-xs mt-2",children:n===1?"Empresa":n===2?"Detalles":"Admin"}),n<3&&e.jsx("div",{className:`h-1 w-12 mx-2 ${r>n?"bg-green-500":"bg-gray-200"}`})]},n))})}),e.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[r===1&&se(),r===2&&ae(),r===3&&re(),e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between gap-4 w-full",children:[r>1&&e.jsx(b,{type:"button",variant:"outline",onClick:K,disabled:x,children:"Anterior"}),r<3?e.jsx(b,{type:"button",onClick:Z,disabled:x||_||r===1&&!M,className:"ml-auto",children:"Siguiente"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{type:"button",variant:"outline",onClick:K,disabled:x,children:"Anterior"}),e.jsx(b,{type:"submit",disabled:x,className:"ml-auto",children:x?"Creando...":"Crear Inquilino"})]})]})})]})]})]}),e.jsx(V,{open:a.show,onOpenChange:n=>w(l=>({...l,show:n})),children:e.jsxs(U,{className:"sm:max-w-md",children:[e.jsxs($,{children:[e.jsxs(O,{className:"text-green-600 flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),e.jsx("span",{children:"¡Inquilino creado con éxito!"})]}),e.jsx(P,{children:a.message})]}),a.tenant&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-muted-foreground",children:"Empresa:"}),e.jsx("p",{className:"font-medium",children:a.tenant.company_name})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-muted-foreground",children:"ID:"}),e.jsx("p",{className:"font-medium",children:a.tenant.id})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-muted-foreground",children:"Dominio:"}),e.jsx("p",{className:"font-medium",children:a.tenant.domain})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-muted-foreground",children:"Prueba hasta:"}),e.jsx("p",{className:"font-medium",children:a.tenant.trial_ends_at})]})]})]}),e.jsx(G,{children:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(b,{variant:"outline",onClick:()=>w(n=>({...n,show:!1})),children:"Cerrar"}),a.tenant&&e.jsx(b,{asChild:!0,children:e.jsxs("a",{href:`http://${a.tenant.domain}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Ir al sitio"})]})})]})})]})})]})}function Ce({tenants:t,app_domain:g}){const[h,u]=c.useState(""),[r,y]=c.useState("created_at"),[s,f]=c.useState("desc"),[d,j]=c.useState(null),[x,C]=c.useState(!1),v=a=>{a===r?f(s==="asc"?"desc":"asc"):(y(a),f("asc"))},N=a=>{j(a),C(!0)},_=()=>{C(!1),j(null)},M=[...t.filter(a=>{const w=h.toLowerCase();return a.id.toLowerCase().includes(w)||a.primary_domain&&a.primary_domain.toLowerCase().includes(w)||a.company_name&&a.company_name.toLowerCase().includes(w)})].sort((a,w)=>{const k=a[r]??"",F=w[r]??"";return k<F?s==="asc"?-1:1:k>F?s==="asc"?1:-1:0}),z=a=>{switch(a){case"active":return e.jsx("span",{className:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"Activa"});case"trial":return e.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:"Prueba"});case"expired":return e.jsx("span",{className:"rounded-full bg-red-100 px-2 py-1 text-xs font-medium text-red-800",children:"Expirada"});case"inactive":return e.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-800",children:"Inactiva"});default:return e.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-800",children:"Desconocido"})}};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"overflow-hidden",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Inquilinos"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar inquilinos...",className:"w-64 rounded-md border px-3 py-2",value:h,onChange:a=>u(a.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"absolute top-2.5 right-3 h-5 w-5 text-gray-400",children:e.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})]}),e.jsx(_e,{domain:g})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-neutral-200 bg-neutral-50 text-left text-xs font-medium tracking-wide text-neutral-500 uppercase dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:[e.jsx("th",{className:"cursor-pointer px-4 py-3",onClick:()=>v("company_name"),children:e.jsxs("div",{className:"flex items-center",children:["Inquilino",r==="company_name"&&e.jsx(H,{direction:s})]})}),e.jsx("th",{className:"cursor-pointer px-4 py-3",onClick:()=>v("primary_domain"),children:e.jsxs("div",{className:"flex items-center",children:["Dominio",r==="primary_domain"&&e.jsx(H,{direction:s})]})}),e.jsx("th",{className:"px-4 py-3",children:"Plan"}),e.jsx("th",{className:"px-4 py-3",children:"Estado"}),e.jsx("th",{className:"cursor-pointer px-4 py-3",onClick:()=>v("created_at"),children:e.jsxs("div",{className:"flex items-center",children:["Creado",r==="created_at"&&e.jsx(H,{direction:s})]})}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-3 text-center text-sm text-neutral-500",children:"No hay inquilinos disponibles"})}):M.map(a=>e.jsxs("tr",{className:"border-b border-neutral-200 bg-white text-sm last:border-0 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-neutral-100 dark:bg-neutral-800",children:e.jsx(I,{className:"h-5 w-5 text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.company_name||a.id}),e.jsx("div",{className:"text-xs text-neutral-500",children:a.id})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("a",{href:`https://${a.primary_domain}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline dark:text-blue-400",children:a.primary_domain})}),e.jsx("td",{className:"px-4 py-3",children:a.subscription_plan?e.jsx("span",{children:a.subscription_plan.name}):e.jsx("span",{className:"text-neutral-500",children:"Sin plan"})}),e.jsx("td",{className:"px-4 py-3",children:z(a.subscription_status)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:new Date(a.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:e.jsxs(te,{children:[e.jsx(le,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Abrir menú"}),e.jsx(je,{className:"h-4 w-4"})]})}),e.jsxs(de,{align:"end",children:[e.jsxs(T,{onClick:()=>N(a),children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Editar"]}),e.jsxs(T,{onClick:()=>R.visit(route("admin.tenants.subscription",a.id)),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Gestionar Suscripción"]}),e.jsxs(T,{onClick:()=>R.visit(route("admin.tenants.reset-admin",a.id)),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Resetear Credenciales"]})]})]})})})]},a.id))})]})})]}),d&&e.jsx(ye,{tenant:d,isOpen:x,onClose:_})]})}function H({direction:t}){return e.jsx("span",{className:"ml-1",children:t==="asc"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a.75.75 0 01.75.75v6.638l1.96-2.158a.75.75 0 111.08 1.04l-3.25 3.5a.75.75 0 01-1.08 0l-3.25-3.5a.75.75 0 111.08-1.04l1.96 2.158V5.75A.75.75 0 0110 5z",clipRule:"evenodd"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M10 15a.75.75 0 01-.75-.75V7.612L7.29 9.77a.75.75 0 01-1.08-1.04l3.25-3.5a.75.75 0 011.08 0l3.25 3.5a.75.75 0 11-1.08 1.04l-1.96-2.158v6.638A.75.75 0 0110 15z",clipRule:"evenodd"})})})}const Se=[{title:"Inquilinos",href:"/tenants"}],Me=[{name:"Administrador",description:"Control total del sistema con acceso a todas las funciones",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},{name:"Vendedor",description:"Gestión de ventas e inventario básico",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 004.25 22.5h15.5a1.875 1.875 0 001.865-2.071l-1.263-12a1.875 1.875 0 00-1.865-1.679H16.5V6a4.5 4.5 0 10-9 0zM12 3a3 3 0 00-3 3v.75h6V6a3 3 0 00-3-3zm-3 8.25a3 3 0 106 0v-.75a.75.75 0 011.5 0v.75a4.5 4.5 0 11-9 0v-.75a.75.75 0 011.5 0v.75z",clipRule:"evenodd"})})},{name:"Cajero",description:"Manejo de caja y transacciones",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:[e.jsx("path",{d:"M12 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}),e.jsx("path",{fillRule:"evenodd",d:"M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 14.625v-9.75zM8.25 9.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM18.75 9a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 00.75-.75V9.75a.75.75 0 00-.75-.75h-.008zM4.5 9.75A.75.75 0 015.25 9h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V9.75z",clipRule:"evenodd"}),e.jsx("path",{d:"M2.25 18a.75.75 0 000 1.5h19.5a.75.75 0 000-1.5H2.25z"})]})},{name:"Contador",description:"Acceso a reportes contables y financieros",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:[e.jsx("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 013.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 013.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 01-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875zM9.75 14.25a.75.75 0 000 1.5H15a.75.75 0 000-1.5H9.75z",clipRule:"evenodd"}),e.jsx("path",{d:"M14.25 5.25a5.23 5.23 0 00-1.279-3.434 9.768 9.768 0 016.963 6.963A5.23 5.23 0 0016.5 7.5h-1.875a.375.375 0 01-.375-.375V5.25z"})]})}];function _s({tenants:t,stats:g,app_domain:h}){return e.jsxs(Ne,{breadcrumbs:Se,children:[e.jsx(ie,{title:"Inquilinos"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestión de Inquilinos"})]})}),e.jsx(we,{stats:g}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(Ce,{tenants:t,app_domain:h})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(A,{children:[e.jsxs(B,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-primary"}),e.jsx(L,{children:"Roles Disponibles"})]}),e.jsx(Y,{children:"Cada inquilino puede tener usuarios con diferentes roles"})]}),e.jsx(Q,{className:"space-y-4",children:Me.map((u,r)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary",children:u.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:u.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]})]},r))})]}),e.jsxs(A,{children:[e.jsx(B,{className:"pb-3",children:e.jsx(L,{children:"Información"})}),e.jsxs(Q,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"Cada inquilino representa una empresa independiente con su propio dominio, usuarios y datos."}),e.jsx("p",{children:"Al crear un inquilino, se genera automáticamente un usuario administrador que puede gestionar la configuración y crear usuarios adicionales con diferentes roles."})]})]})]})]})]})]})}export{_s as default};
