import{r as i,U as C,j as Ie}from"./app-DQczwFTk.js";import"./index-CTC3mW-r.js";import"./app-C-su-A41.js";function ye(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.useMemo(()=>n=>{t.forEach(s=>s(n))},t)}const Ce=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Te(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Oe(e){return"nodeType"in e}function ie(e){var t,r;return e?Te(e)?e:Oe(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}const B=Ce?i.useLayoutEffect:i.useEffect;function ae(e){const t=i.useRef(e);return B(()=>{t.current=e}),i.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function W(e,t){t===void 0&&(t=[e]);const r=i.useRef(e);return B(()=>{r.current!==e&&(r.current=e)},t),r}function $(e){const t=ae(e),r=i.useRef(null),n=i.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,n]}let Y={};function oe(e,t){return i.useMemo(()=>{const r=Y[e]==null?0:Y[e]+1;return Y[e]=r,e+"-"+r},[e,t])}function Se(e){if(!e)return!1;const{KeyboardEvent:t}=ie(e.target);return t&&e instanceof t}const X=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[X.Translate.toString(e),X.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}});var F;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function _(){}const ze=Object.freeze({x:0,y:0});function Ee(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ne(e,t,r){const n=Ee(t);if(!n)return e;const{scaleX:s,scaleY:c,x:o,y:u}=n,d=e.left-o-(1-s)*parseFloat(r),l=e.top-u-(1-c)*parseFloat(r.slice(r.indexOf(" ")+1)),a=s?e.width/s:e.width,f=c?e.height/c:e.height;return{width:a,height:f,top:l,right:d+a,bottom:l+f,left:d}}const Me={ignoreTransform:!1};function ke(e,t){t===void 0&&(t=Me);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:l,transformOrigin:a}=ie(e).getComputedStyle(e);l&&(r=Ne(r,l,a))}const{top:n,left:s,width:c,height:o,bottom:u,right:d}=r;return{top:n,left:s,width:c,height:o,bottom:u,right:d}}var N;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(N||(N={}));var K;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(K||(K={}));var m;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(m||(m={}));m.Space,m.Enter,m.Esc,m.Space,m.Enter,m.Tab;var ee;(function(e){e[e.RightClick=2]="RightClick"})(ee||(ee={}));var te;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(te||(te={}));var re;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(re||(re={}));N.Backward+"",N.Forward+"",N.Backward+"",N.Forward+"";var P;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(P||(P={}));var V;(function(e){e.Optimized="optimized"})(V||(V={}));function Ae(e){let{callback:t,disabled:r}=e;const n=ae(t),s=i.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(n)},[r]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Fe(e,t){return i.useMemo(()=>e.reduce((r,n)=>{let{eventName:s,handler:c}=n;return r[s]=o=>{c(o,t)},r},{}),[e,t])}P.WhileDragging,V.Optimized;const Xe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:_,draggableNodes:new Map,over:null,measureDroppableContainers:_},ce=i.createContext(Xe),Le=i.createContext({...ze,scaleX:1,scaleY:1});var ne;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ne||(ne={}));const Be=i.createContext(null),se="button",Ue="Draggable";function je(e){let{id:t,data:r,disabled:n=!1,attributes:s}=e;const c=oe(Ue),{activators:o,activatorEvent:u,active:d,activeNodeRect:l,ariaDescribedById:a,draggableNodes:f,over:h}=i.useContext(ce),{role:D=se,roleDescription:T="draggable",tabIndex:R=0}=s??{},p=(d==null?void 0:d.id)===t,x=i.useContext(p?Le:Be),[O,b]=$(),[v,w]=$(),M=Fe(o,t),S=W(r);B(()=>(f.set(t,{id:t,key:c,node:O,activatorNode:v,data:S}),()=>{const y=f.get(t);y&&y.key===c&&f.delete(t)}),[f,t]);const I=i.useMemo(()=>({role:D,tabIndex:R,"aria-disabled":n,"aria-pressed":p&&D===se?!0:void 0,"aria-roledescription":T,"aria-describedby":a.draggable}),[n,D,R,p,T,a.draggable]);return{active:d,activatorEvent:u,activeNodeRect:l,attributes:I,isDragging:p,listeners:n?void 0:M,node:O,over:h,setNodeRef:b,setActivatorNodeRef:w,transform:x}}const Ye="Droppable",We={timeout:25};function $e(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:s}=e;const c=oe(Ye),{active:o,dispatch:u,over:d,measureDroppableContainers:l}=i.useContext(ce),a=i.useRef({disabled:r}),f=i.useRef(!1),h=i.useRef(null),D=i.useRef(null),{disabled:T,updateMeasurementsFor:R,timeout:p}={...We,...s},x=W(R??n),O=i.useCallback(()=>{if(!f.current){f.current=!0;return}D.current!=null&&clearTimeout(D.current),D.current=setTimeout(()=>{l(Array.isArray(x.current)?x.current:[x.current]),D.current=null},p)},[p]),b=Ae({callback:O,disabled:T||!o}),v=i.useCallback((I,y)=>{b&&(y&&(b.unobserve(y),f.current=!1),I&&b.observe(I))},[b]),[w,M]=$(v),S=W(t);return i.useEffect(()=>{!b||!w.current||(b.disconnect(),f.current=!1,b.observe(w.current))},[w,b]),i.useEffect(()=>(u({type:F.RegisterDroppable,element:{id:n,key:c,disabled:r,node:w,rect:h,data:S}}),()=>u({type:F.UnregisterDroppable,key:c,id:n})),[n]),i.useEffect(()=>{r!==a.current.disabled&&(u({type:F.SetDroppableDisabled,id:n,key:c,disabled:r}),a.current.disabled=r)},[n,c,r,u]),{active:o,rect:h,isOver:(d==null?void 0:d.id)===n,node:w,over:d,setNodeRef:M}}function ue(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function L(e){return e!==null&&e>=0}const Pe=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const c=ue(t,n,r),o=t[s],u=c[s];return!u||!o?null:{x:u.left-o.left,y:u.top-o.top,scaleX:u.width/o.width,scaleY:u.height/o.height}},Ve="Sortable",qe=C.createContext({activeIndex:-1,containerId:Ve,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Pe,disabled:{draggable:!1,droppable:!1}}),He=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return ue(r,n,s).indexOf(t)},Ge=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:c,newIndex:o,previousItems:u,previousContainerId:d,transition:l}=e;return!l||!n||u!==c&&s===o?!1:r?!0:o!==s&&t===d},Je={duration:200,easing:"ease"},le="transform",Qe=X.Transition.toString({property:le,duration:0,easing:"linear"}),Ze={roleDescription:"sortable"};function _e(e){let{disabled:t,index:r,node:n,rect:s}=e;const[c,o]=i.useState(null),u=i.useRef(r);return B(()=>{if(!t&&r!==u.current&&n.current){const d=s.current;if(d){const l=ke(n.current,{ignoreTransform:!0}),a={x:d.left-l.left,y:d.top-l.top,scaleX:d.width/l.width,scaleY:d.height/l.height};(a.x||a.y)&&o(a)}}r!==u.current&&(u.current=r)},[t,r,n,s]),i.useEffect(()=>{c&&o(null)},[c]),c}function Ke(e){let{animateLayoutChanges:t=Ge,attributes:r,disabled:n,data:s,getNewIndex:c=He,id:o,strategy:u,resizeObserverConfig:d,transition:l=Je}=e;const{items:a,containerId:f,activeIndex:h,disabled:D,disableTransforms:T,sortedRects:R,overIndex:p,useDragOverlay:x,strategy:O}=i.useContext(qe),b=et(n,D),v=a.indexOf(o),w=i.useMemo(()=>({sortable:{containerId:f,index:v,items:a},...s}),[f,s,v,a]),M=i.useMemo(()=>a.slice(a.indexOf(o)),[a,o]),{rect:S,node:I,isOver:y,setNodeRef:q}=$e({id:o,data:w,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...d}}),{active:k,activatorEvent:de,activeNodeRect:fe,attributes:ge,setNodeRef:H,listeners:pe,isDragging:U,over:be,setActivatorNodeRef:ve,transform:me}=je({id:o,data:w,attributes:{...Ze,...r},disabled:b.draggable}),we=ye(q,H),z=!!k,G=z&&!T&&L(h)&&L(p),J=!x&&U,Q=J&&G?me:null,he=G?Q??(u??O)({rects:R,activeNodeRect:fe,activeIndex:h,overIndex:p,index:v}):null,A=L(h)&&L(p)?c({id:o,items:a,activeIndex:h,overIndex:p}):v,E=k==null?void 0:k.id,g=i.useRef({activeId:E,items:a,newIndex:A,containerId:f}),De=a!==g.current.items,Z=t({active:k,containerId:f,isDragging:U,isSorting:z,id:o,index:v,items:a,newIndex:g.current.newIndex,previousItems:g.current.items,previousContainerId:g.current.containerId,transition:l,wasDragging:g.current.activeId!=null}),j=_e({disabled:!Z,index:v,node:I,rect:S});return i.useEffect(()=>{z&&g.current.newIndex!==A&&(g.current.newIndex=A),f!==g.current.containerId&&(g.current.containerId=f),a!==g.current.items&&(g.current.items=a)},[z,A,f,a]),i.useEffect(()=>{if(E===g.current.activeId)return;if(E!=null&&g.current.activeId==null){g.current.activeId=E;return}const xe=setTimeout(()=>{g.current.activeId=E},50);return()=>clearTimeout(xe)},[E]),{active:k,activeIndex:h,attributes:ge,data:w,rect:S,index:v,newIndex:A,items:a,isOver:y,isSorting:z,isDragging:U,listeners:pe,node:I,overIndex:p,over:be,setNodeRef:we,setActivatorNodeRef:ve,setDroppableNodeRef:q,setDraggableNodeRef:H,transform:j??he,transition:Re()};function Re(){if(j||De&&g.current.newIndex===v)return Qe;if(!(J&&!Se(de)||!l)&&(z||Z))return X.Transition.toString({...l,property:le})}}function et(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}m.Down,m.Right,m.Up,m.Left;const it=({id:e,children:t})=>{const{attributes:r,listeners:n,setNodeRef:s,transform:c,transition:o,isDragging:u}=Ke({id:e}),d={transform:X.Transform.toString(c),transition:o,opacity:u?.5:1,cursor:"grab"};return Ie.jsx("div",{ref:s,style:d,...r,children:C.Children.map(t,l=>C.isValidElement(l)?C.cloneElement(l,{children:C.Children.map(l.props.children,a=>C.isValidElement(a)&&a.props["data-drag-handle"]?C.cloneElement(a,{...n}):a)}):l)})};export{it as SortableItem};
