import{j as e,H as w,a as f}from"./app-DQczwFTk.js";import{B as l}from"./badge-CIPxAGrn.js";import{B as u}from"./button-BYXnJyXv.js";import{C as n,a as o,b as x,c as p,d as h,e as N}from"./card-BNPG6E-E.js";import{A as C}from"./app-layout-CxNCz1W0.js";import{C as A}from"./calendar-RZLbZmV6.js";import{T}from"./triangle-alert-dUu2CXl0.js";import{F as D}from"./file-text-mqHhLRuK.js";import{C as g}from"./index-ClSqUjUN.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BOxxC3ps.js";import"./index-CX1ZUDb2.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BfMh8EvQ.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";function fe({currentPlan:i,availablePlans:y,subscriptionStatus:r,invoiceUsage:a}){const b=s=>s?new Date(s).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A",v=()=>r.isActive?r.onTrial?e.jsx(l,{children:"Periodo de Prueba"}):e.jsx(l,{variant:"outline",children:"Activa"}):e.jsx(l,{variant:"destructive",children:"Inactiva"}),m=(()=>{const s=r.onTrial?r.trialEndsAt:r.subscriptionEndsAt;if(!s)return null;const t=new Date(s),d=new Date,c=t.getTime()-d.getTime(),j=Math.ceil(c/(1e3*60*60*24));return j>0?j:0})();return e.jsxs(C,{children:[e.jsx(w,{title:"Suscripción"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Suscripción"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 md:col-span-2",children:[e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{children:"Estado de la Suscripción"}),v()]}),e.jsx(p,{children:r.isActive?"Su suscripción está activa":"Su suscripción no está activa"})]}),e.jsx(h,{className:"space-y-4",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan Actual"}),e.jsx("p",{className:"text-lg font-medium",children:i.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Precio"}),e.jsxs("p",{className:"text-lg font-medium",children:[i.price.toLocaleString("es-PE",{style:"currency",currency:"PEN"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["/",i.billing_period==="monthly"?"mes":"año"]})]})]})]}),m!==null&&e.jsxs("div",{className:"rounded-md bg-muted p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"mr-2 h-4 w-4 text-primary"}),e.jsxs("span",{className:"text-sm font-medium",children:[r.onTrial?"Periodo de prueba":"Suscripción"," expira en:"]})]}),e.jsxs("span",{className:"font-bold",children:[m," días"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-primary",style:{width:`${Math.min(m/30*100,100)}%`}})}),e.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Fecha de expiración:"," ",b(r.onTrial?r.trialEndsAt:r.subscriptionEndsAt)]})]})]}):e.jsxs("div",{className:"flex items-center rounded-md bg-amber-50 p-4 dark:bg-amber-950/20",children:[e.jsx(T,{className:"mr-2 h-5 w-5 text-amber-500"}),e.jsx("p",{className:"text-sm",children:"No tiene un plan de suscripción activo. Por favor, seleccione un plan."})]})}),e.jsx(N,{children:e.jsx(u,{className:"w-full",onClick:()=>f.get("/subscription/upgrade"),children:i?"Cambiar Plan":"Seleccionar Plan"})})]}),e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Uso de Facturas"}),e.jsx(p,{children:"Seguimiento del uso de facturas en el periodo actual"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"mr-2 h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Facturas emitidas este mes:"})]}),e.jsxs("span",{className:"font-bold",children:[a.monthly," / ",a.limit===0?"∞":a.limit]})]}),a.limit>0&&e.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-primary",style:{width:`${Math.min(a.percentage,100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total de facturas emitidas: ",a.total]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-4 text-lg font-medium",children:"Planes Disponibles"}),e.jsx("div",{className:"space-y-4",children:y.map(s=>{var t;return e.jsxs(n,{className:s.is_featured?"border-primary":"",children:[e.jsxs(o,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-base",children:s.name}),s.is_featured&&e.jsx(l,{children:"Recomendado"})]}),e.jsxs(p,{children:[s.price.toLocaleString("es-PE",{style:"currency",currency:"PEN"}),e.jsxs("span",{className:"text-xs",children:["/",s.billing_period==="monthly"?"mes":"año"]})]})]}),e.jsx(h,{className:"pb-2",children:e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-4 w-4 text-primary"}),s.invoice_limit===0?"Facturas ilimitadas":`${s.invoice_limit} facturas/mes`]}),(t=s.features)==null?void 0:t.map((d,c)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 h-4 w-4 text-primary"}),d]},c))]})}),e.jsx(N,{children:e.jsx(u,{variant:(i==null?void 0:i.id)===s.id?"outline":"default",className:"w-full",disabled:(i==null?void 0:i.id)===s.id,onClick:()=>f.get("/subscription/upgrade"),children:(i==null?void 0:i.id)===s.id?"Plan Actual":"Seleccionar"})})]},s.id)})})]})]})]})]})}export{fe as default};
