import{r as j,u as D,j as e}from"./app-DQczwFTk.js";import{L as l}from"./label-BchK1h47.js";import{I as c}from"./input-goWATpHJ.js";import{T as B}from"./textarea-DHAakLHN.js";import{B as v}from"./button-BYXnJyXv.js";import{S as F,a as w,b as L,c as V,d as k}from"./select-D52pRjk-.js";import{S as I}from"./switch-x9PZ-zT7.js";import{C as d,a as p,b as h,c as u,d as x}from"./card-BNPG6E-E.js";import{B as O}from"./badge-CIPxAGrn.js";import{DefaultConfig as R}from"./default-CmT3ne7C.js";import{AboutConfig as A}from"./about-Bv87v9PC.js";import{LandingConfig as M}from"./landing-DXN8c3n0.js";import G from"./contact-DNI6rlKa.js";import z from"./portfolio-DuD9Kt-C.js";import U from"./services-Fkk8KhbC.js";import{T as q}from"./tiptapWrapper-B23OfFwY.js";import"./app-C-su-A41.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-BBPPPnEU.js";import"./index-BfMh8EvQ.js";import"./index-KJ4lOR0W.js";import"./index-DSuT5VJt.js";import"./index-CqVE9Fls.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";import"./banner-selector-8Ox-KjNa.js";import"./dialog-DHq7tLZ5.js";import"./index-DcW1-0jE.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./image-dropzone-B7t8X9ae.js";import"./index-Cou6Ygo0.js";import"./trash-2-b2Qe_qpo.js";import"./news-selector-DpyrRi43.js";import"./testimonial-selector-cDXG25qk.js";import"./link-N9AlV6Pq.js";import"./plus-BGuKkasZ.js";import"./trash-Drbn3N9x.js";import"./app-layout-CxNCz1W0.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./map-pin-d53rfHWq.js";import"./phone-BPAF2YEf.js";import"./mail-OHpVa5Fe.js";import"./external-link-sBsljvUk.js";import"./with-selector-C9hgCskx.js";import"./popover-PDQ3fITR.js";import"./code-BO9xQCBn.js";const f={default:{label:"Página Simple",description:"Plantilla básica para páginas de contenido",defaultValues:{},configComponent:R},landing:{label:"Landing Page",description:"Plantilla para páginas de inicio con múltiples secciones",defaultValues:{heroTitle:"",heroSubtitle:"",heroButtonText:"",heroButtonLink:"",featuresTitle:"",featuresDescription:"",features:[],testimonials:[],highlights:[],ctaTitle:"",ctaDescription:"",ctaButtonText:"",ctaButtonLink:"",pricing:[],news:[]},configComponent:M},about:{label:"Sobre Nosotros",description:"Plantilla para páginas 'Sobre Nosotros' o 'Quiénes Somos'",defaultValues:{company_image:"",mission:"",vision:"",values:""},configComponent:A},contact:{label:"Contacto",description:"Plantilla para páginas de contacto",defaultValues:{address:"",phone:"",email:"",map_embed:""},configComponent:G},portfolio:{label:"Portafolio",description:"Plantilla para mostrar trabajos o proyectos",defaultValues:{projects:[]},configComponent:z},services:{label:"Servicios",description:"Plantilla para listar servicios ofrecidos",defaultValues:{services_list:[]},configComponent:U}};function nt({page:t,templates:H,templateConfigs:Q}){const[n,b]=j.useState((t==null?void 0:t.template)||"default"),[g,_]=j.useState({}),{data:r,setData:o,post:N,put:S,processing:C,errors:s}=D({title:(t==null?void 0:t.title)||"",slug:(t==null?void 0:t.slug)||"",content:(t==null?void 0:t.content)||"",template:(t==null?void 0:t.template)||"default",template_data:(t==null?void 0:t.template_data)||f.default.defaultValues,is_active:(t==null?void 0:t.is_active)??!0,sort_order:(t==null?void 0:t.sort_order)||0,meta_title:(t==null?void 0:t.meta_title)||"",meta_description:(t==null?void 0:t.meta_description)||"",meta_image:(t==null?void 0:t.meta_image)||""}),T=i=>{const a={...i};return a.hero_type==="single"?a.banners=[]:a.hero_type==="slider"&&(a.banners=a.banners.map(E=>({banner_id:E.banner_id})),a.heroTitle="",a.heroSubtitle="",a.heroButtonText="",a.heroButtonLink=""),a},y=i=>{i.preventDefault();const a=T(r);t?S(route("admin.pages.update",t.id),a):N(route("admin.pages.store"),a)};j.useEffect(()=>{if(n!==r.template){if(o("template",n),!t||n!==t.template){const i=f[n];i&&o("template_data",i.defaultValues)}_({})}},[n]);const P=i=>{o("template_data",i),_({})},m=f[n];return e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs(d,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Información Básica"}),e.jsx(u,{children:"Información general de la página"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"is_active",checked:r.is_active,onCheckedChange:i=>o("is_active",i)}),e.jsx(l,{htmlFor:"is_active",children:"Página activa"})]})]})}),e.jsx(x,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title",children:"Título"}),e.jsx(c,{id:"title",value:r.title,onChange:i=>o("title",i.target.value),placeholder:"Título de la página"}),s.title&&e.jsx("p",{className:"text-sm text-red-500",children:s.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"slug",children:"Slug"}),e.jsx(c,{id:"slug",value:r.slug,onChange:i=>o("slug",i.target.value),placeholder:"URL amigable"}),s.slug&&e.jsx("p",{className:"text-sm text-red-500",children:s.slug})]}),e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(l,{htmlFor:"template",children:"Plantilla"}),e.jsxs(F,{value:n,onValueChange:i=>b(i),children:[e.jsx(w,{className:"w-full",children:e.jsx(L,{placeholder:"Selecciona una plantilla"})}),e.jsx(V,{children:Object.entries(f).map(([i,a])=>e.jsx(k,{value:i,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium",children:a.label}),e.jsx("span",{className:"text-xs text-gray-500",children:a.description})]})},i))})]}),s.template&&e.jsx("p",{className:"text-sm text-red-500",children:s.template})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"sort_order",children:"Orden"}),e.jsx(c,{id:"sort_order",type:"number",inputMode:"numeric",pattern:"[0-9]*",min:0,value:r.sort_order,onChange:i=>{const a=parseInt(i.target.value);o("sort_order",isNaN(a)||a<0?0:a)},className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]})})]}),m&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:["Configuración del Template",e.jsx(O,{variant:"outline",children:m.label})]}),e.jsx(u,{children:m.description})]}),e.jsx(x,{children:e.jsx(m.configComponent,{data:r.template_data,onChange:P,errors:g})})]}),n==="default"&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(h,{children:"Contenido General"}),e.jsx(u,{children:"Contenido principal de la página"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Contenido"}),e.jsx(q,{content:r.content,onChange:i=>o("content",i),placeholder:"Escribe el contenido de la página..."}),s.content&&e.jsx("p",{className:"text-sm text-red-500",children:s.content})]})})]}),e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(h,{children:"Configuración SEO"}),e.jsx(u,{children:"Optimización para motores de búsqueda"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"meta_title",children:"Meta Título"}),e.jsx(c,{id:"meta_title",value:r.meta_title,onChange:i=>o("meta_title",i.target.value),placeholder:"Título para SEO (opcional)"}),s.meta_title&&e.jsx("p",{className:"text-sm text-red-500",children:s.meta_title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"meta_image",children:"Imagen para SEO"}),e.jsx(c,{id:"meta_image",value:r.meta_image,onChange:i=>o("meta_image",i.target.value),placeholder:"URL de la imagen (opcional)"}),s.meta_image&&e.jsx("p",{className:"text-sm text-red-500",children:s.meta_image})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"meta_description",children:"Meta Descripción"}),e.jsx(B,{id:"meta_description",value:r.meta_description,onChange:i=>o("meta_description",i.target.value),rows:3,placeholder:"Descripción para SEO (opcional)"}),s.meta_description&&e.jsx("p",{className:"text-sm text-red-500",children:s.meta_description})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancelar"}),e.jsx(v,{type:"submit",disabled:C,children:C?"Guardando...":t?"Actualizar":"Crear Página"})]})]})}export{nt as PageForm};
