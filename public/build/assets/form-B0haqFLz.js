import{d as q,r as n,u as T,j as e}from"./app-DQczwFTk.js";import{I as k}from"./input-goWATpHJ.js";import{L as d}from"./label-BchK1h47.js";import{B as S}from"./button-BYXnJyXv.js";import{S as p,a as x,b as h,c as u,d as g}from"./select-D52pRjk-.js";import{T as V}from"./textarea-DHAakLHN.js";import{A as w,b as f}from"./alert-C2Fc1m40.js";import{c as $}from"./createLucideIcon-D40S4Mwt.js";import"./app-C-su-A41.js";import"./utils-CPN-yreq.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-D2mu7mBH.js";import"./index-BBPPPnEU.js";import"./index-BfMh8EvQ.js";import"./index-KJ4lOR0W.js";import"./index-DSuT5VJt.js";import"./index-CqVE9Fls.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],j=$("Info",B);function pe({seo:l}){const C=q().props,{availableModels:E,pages:y,news:b}=C,[o,c]=n.useState([]),{data:a,setData:i,post:O,put:R,processing:v,errors:s}=T({route:(l==null?void 0:l.route)||"",title:(l==null?void 0:l.title)||"",description:(l==null?void 0:l.description)||"",image:(l==null?void 0:l.image)||"",author:(l==null?void 0:l.author)||"",robots:(l==null?void 0:l.robots)||"index,follow",keywords:(l==null?void 0:l.keywords)||"",canonical_url:(l==null?void 0:l.canonical_url)||"",model_type:(l==null?void 0:l.model_type)||"",model_id:l!=null&&l.model_id?String(l.model_id):""}),N=n.useCallback(t=>{c(t==="App\\Models\\Page"?y||[]:t==="App\\Models\\News"?b||[]:[])},[y,b]);n.useEffect(()=>{N(a.model_type),l&&a.model_type!==l.model_type&&i(t=>({...t,model_id:""}))},[a.model_type,N]);const _=n.useCallback((t,r,L)=>{if(!t||!r)return"";const m=L.find(P=>P.id.toString()===r);return m?t==="App\\Models\\Page"?`/${m.slug}`:t==="App\\Models\\News"?`/news/${m.slug}`:"":""},[]);n.useEffect(()=>{if(a.model_type&&a.model_id&&o.length>0){const t=_(a.model_type,a.model_id,o);t&&t!==a.route&&i(r=>({...r,route:t}))}},[a.model_id,a.model_type,o,_]);const F=t=>{t.preventDefault(),l?R(`/admin/seo/${l.id}`,{preserveScroll:!0}):O("/admin/seo",{preserveScroll:!0})},A=t=>{i(r=>({...r,model_type:t,model_id:"",route:""}))},I=t=>{i(r=>({...r,model_id:t}))},M=[{key:"title",label:"Título SEO",type:"input",placeholder:"Título optimizado para SEO (máx. 60 caracteres)"},{key:"description",label:"Meta Descripción",type:"textarea",placeholder:"Descripción breve y atractiva (máx. 160 caracteres)"},{key:"keywords",label:"Palabras Clave",type:"input",placeholder:"palabra1, palabra2, palabra3"},{key:"author",label:"Autor",type:"input",placeholder:"Nombre del autor del contenido"},{key:"image",label:"Imagen SEO (URL)",type:"input",placeholder:"https://ejemplo.com/imagen.jpg"},{key:"canonical_url",label:"URL Canónica",type:"input",placeholder:"https://ejemplo.com/pagina-principal"}],D=[{value:"index,follow",label:"Index, Follow (Recomendado)"},{value:"noindex,follow",label:"No Index, Follow"},{value:"index,nofollow",label:"Index, No Follow"},{value:"noindex,nofollow",label:"No Index, No Follow"}];return e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Asociación del SEO"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"model_type",children:"Tipo de Contenido"}),e.jsxs(p,{value:a.model_type,onValueChange:A,children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Seleccionar tipo..."})}),e.jsx(u,{children:Object.entries(E||{}).map(([t,r])=>t&&e.jsx(g,{value:t,children:r},t))})]}),s.model_type&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.model_type})]}),a.model_type&&o.length>0&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"model_id",children:"Seleccionar Registro"}),e.jsxs(p,{value:a.model_id,onValueChange:I,children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Seleccionar registro..."})}),e.jsx(u,{children:o.map(t=>e.jsx(g,{value:t.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:t.title}),e.jsxs("span",{className:"text-xs text-gray-500",children:["/",t.slug]})]})},t.id))})]}),s.model_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.model_id})]}),e.jsxs("div",{children:[e.jsxs(d,{htmlFor:"route",children:["Ruta URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(k,{id:"route",value:a.route,onChange:t=>i("route",t.target.value),placeholder:"/ruta-de-la-pagina",required:!0}),s.route&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.route})]})]}),!a.model_type&&e.jsxs(w,{className:"mt-4",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsxs(f,{children:[e.jsx("strong",{children:"SEO Global:"})," Este SEO se aplicará cuando no haya un SEO específico configurado para la ruta."]})]}),a.model_type&&!a.model_id&&e.jsxs(w,{className:"mt-4",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx(f,{children:"Selecciona un registro específico para asociar este SEO, o deja vacío para SEO general del tipo."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Configuración SEO"}),e.jsxs("div",{className:"space-y-4",children:[M.map(t=>e.jsxs("div",{children:[e.jsxs(d,{htmlFor:t.key,children:[t.label,t.key==="title"&&e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",a.title.length,"/60)"]}),t.key==="description"&&e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",a.description.length,"/160)"]})]}),t.type==="textarea"?e.jsx(V,{id:t.key,value:a[t.key],onChange:r=>i(t.key,r.target.value),placeholder:t.placeholder,rows:3,className:t.key==="description"&&a.description.length>160?"border-yellow-400":""}):e.jsx(k,{id:t.key,value:a[t.key],onChange:r=>i(t.key,r.target.value),placeholder:t.placeholder,className:t.key==="title"&&a.title.length>60?"border-yellow-400":""}),s[t.key]&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s[t.key]}),t.key==="title"&&a.title.length>60&&e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"⚠️ El título es muy largo. Se recomienda máximo 60 caracteres."}),t.key==="description"&&a.description.length>160&&e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"⚠️ La descripción es muy larga. Se recomienda máximo 160 caracteres."})]},t.key)),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"robots",children:"Directivas para Robots de Búsqueda"}),e.jsxs(p,{value:a.robots,onValueChange:t=>i("robots",t),children:[e.jsx(x,{children:e.jsx(h,{})}),e.jsx(u,{children:D.map(t=>e.jsx(g,{value:t.value,children:t.label},t.value))})]}),s.robots&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.robots}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Controla cómo los motores de búsqueda indexan esta página"})]})]})]}),(a.title||a.description)&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Vista Previa del SEO"}),e.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-white",children:[e.jsx("div",{className:"text-blue-600 text-lg hover:underline cursor-pointer",children:a.title||"Título de la página"}),e.jsx("div",{className:"text-green-600 text-sm",children:a.canonical_url||`https://ejemplo.com${a.route}`}),e.jsx("div",{className:"text-gray-600 text-sm mt-1",children:a.description||"Descripción de la página que aparecerá en los resultados de búsqueda..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancelar"}),e.jsx(S,{type:"submit",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):l?"Actualizar SEO":"Crear SEO"})]})]})}export{pe as SeoForm};
