import{r as h,j as e}from"./app-DQczwFTk.js";import{B as m}from"./button-BYXnJyXv.js";import{D as v,a as f,b as C,c as N,d as S}from"./dialog-DHq7tLZ5.js";import{I as c}from"./input-goWATpHJ.js";import{L as t}from"./label-BchK1h47.js";import{S as b,a as T,b as D,c as I,d as x}from"./select-D52pRjk-.js";import{I as y}from"./image-dropzone-B7t8X9ae.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BfMh8EvQ.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";import"./card-BNPG6E-E.js";import"./index-Cou6Ygo0.js";import"./trash-2-b2Qe_qpo.js";function oe({testimonials:d=[],value:r,onChange:p,onCreateNew:j}){const[g,l]=h.useState(!1),[n,a]=h.useState({name:"",position:"",message:"",photo:null}),o=d.find(s=>s.id===r)||null,u=async()=>{const s=await j(n);p(s),l(!1),a({name:"",position:"",message:"",photo:null})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{children:"Seleccionar Testimonio"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{value:(r==null?void 0:r.toString())??"none",onValueChange:s=>p(s==="none"?null:parseInt(s)),children:[e.jsx(T,{className:"flex-1",children:e.jsx(D,{placeholder:"Selecciona un testimonio"})}),e.jsxs(I,{children:[e.jsx(x,{value:"none",children:"Ninguno (crear nuevo)"}),d.map(s=>e.jsx(x,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsxs(v,{open:g,onOpenChange:l,children:[e.jsx(f,{asChild:!0,children:e.jsx(m,{variant:"outline",disabled:!!r,children:"Crear Nuevo"})}),e.jsxs(C,{children:[e.jsx(N,{children:e.jsx(S,{children:"Nuevo Testimonio"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Avatar"}),e.jsx(y,{image:n.photo,onImageChange:s=>a(i=>({...i,avatar:s})),collectionName:"testimonials_avatars"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Nombre"}),e.jsx(c,{value:n.name,onChange:s=>a(i=>({...i,name:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Rol"}),e.jsx(c,{value:n.position,onChange:s=>a(i=>({...i,position:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Contenido"}),e.jsx(c,{value:n.message,onChange:s=>a(i=>({...i,message:s.target.value}))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),e.jsx(m,{onClick:u,children:"Crear"})]})]})]})]}),o&&e.jsxs("div",{className:"border p-4 rounded-md space-y-2 bg-muted/50",children:[o.photo&&e.jsx("img",{src:o.photo,alt:"Avatar",className:"w-20 h-20 rounded-full object-cover border"}),e.jsxs("div",{children:[e.jsx("strong",{children:o.name})," â€” ",e.jsx("em",{children:o.position})]}),e.jsx("p",{children:o.message})]})]})}export{oe as TestimonialSelector};
