import{u as S,j as e,H as k}from"./app-DQczwFTk.js";import{A as U}from"./app-layout-CxNCz1W0.js";import{B as N}from"./button-BYXnJyXv.js";import{I as n}from"./input-goWATpHJ.js";import{L as d}from"./label-BchK1h47.js";import{S as p,a as h,b as x,c as u,d as m}from"./select-D52pRjk-.js";import"./app-C-su-A41.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-CX1ZUDb2.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BfMh8EvQ.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./card-BNPG6E-E.js";import"./index-7Ou4doz_.js";import"./chevron-down-Bqmppv4h.js";const A=[{title:"Dashboard",href:"/admin"},{title:"Usuarios",href:"/admin/users"},{title:"Editar usuario",href:"/admin/users/edit"}];function ge({user:r,roles:l,userTypes:j}){var f;const c=r.roles||[],o=c.length>0?c[0]:null,b=((f=o==null?void 0:o.id)==null?void 0:f.toString())||"",{data:t,setData:i,put:y,processing:_,errors:a}=S({first_name:r.first_name||"",last_name:r.last_name||"",email:r.email||"",phone:r.phone||"",address:r.address||"",gender:r.gender||"",date_of_birth:r.date_of_birth||"",dni:r.dni||"",company_name:r.company_name||"",company_address:r.company_address||"",user_type:r.user_type||j[0]||"customer",role_id:b,password:"",password_confirmation:"",status:r.status??!0,is_verified:r.is_verified??!1,is_suspended:r.is_suspended??!1,subscribed_to_news_letter:r.subscribed_to_news_letter??!1}),w=s=>{s.preventDefault(),y(route("admin.users.update",r.id))},C=()=>{if(!t.role_id)return"Sin rol";const s=l==null?void 0:l.find(g=>g.id.toString()===t.role_id);return(s==null?void 0:s.name)||"Sin rol"},F=c.some(s=>s.name==="Super admin"),v=s=>({admin:"Administrador",customer:"Cliente",provider:"Proveedor",user:"Usuario"})[s]||s.charAt(0).toUpperCase()+s.slice(1);return e.jsxs(U,{breadcrumbs:A,children:[e.jsx(k,{title:`Editar usuario ${r.first_name||"Usuario"}`}),e.jsxs("div",{className:"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Editar usuario"}),e.jsx("p",{className:"text-muted-foreground",children:"Modifique los datos del usuario"})]})}),e.jsx("div",{className:"rounded-md border p-6",children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Información básica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"first_name",children:"Nombre"}),e.jsx(n,{id:"first_name",value:t.first_name,onChange:s=>i("first_name",s.target.value),className:"mt-1",required:!0}),a.first_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.first_name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"last_name",children:"Apellido"}),e.jsx(n,{id:"last_name",value:t.last_name,onChange:s=>i("last_name",s.target.value),className:"mt-1",required:!0}),a.last_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.last_name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:t.email,onChange:s=>i("email",s.target.value),className:"mt-1",required:!0}),a.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",children:"Teléfono"}),e.jsx(n,{id:"phone",value:t.phone,onChange:s=>i("phone",s.target.value),className:"mt-1"}),a.phone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.phone})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"dni",children:"DNI"}),e.jsx(n,{id:"dni",value:t.dni,onChange:s=>i("dni",s.target.value),className:"mt-1"}),a.dni&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.dni})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"gender",children:"Género"}),e.jsxs(p,{value:t.gender||void 0,onValueChange:s=>i("gender",s||""),children:[e.jsx(h,{className:"mt-1",children:e.jsx(x,{placeholder:"Seleccionar género"})}),e.jsxs(u,{children:[e.jsx(m,{value:"male",children:"Masculino"}),e.jsx(m,{value:"female",children:"Femenino"}),e.jsx(m,{value:"other",children:"Otro"})]})]}),a.gender&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.gender})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"date_of_birth",children:"Fecha de nacimiento"}),e.jsx(n,{id:"date_of_birth",type:"date",value:t.date_of_birth,onChange:s=>i("date_of_birth",s.target.value),className:"mt-1"}),a.date_of_birth&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.date_of_birth})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"address",children:"Dirección"}),e.jsx(n,{id:"address",value:t.address,onChange:s=>i("address",s.target.value),className:"mt-1"}),a.address&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.address})]})]})]}),(t.user_type==="provider"||r.user_type==="provider")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Información de empresa"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"company_name",children:"Nombre de empresa"}),e.jsx(n,{id:"company_name",value:t.company_name,onChange:s=>i("company_name",s.target.value),className:"mt-1"}),a.company_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.company_name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"company_address",children:"Dirección de empresa"}),e.jsx(n,{id:"company_address",value:t.company_address,onChange:s=>i("company_address",s.target.value),className:"mt-1"}),a.company_address&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.company_address})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Configuración del sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"user_type",children:"Tipo de usuario"}),e.jsxs(p,{value:t.user_type,onValueChange:s=>i("user_type",s),children:[e.jsx(h,{className:"mt-1",children:e.jsx(x,{placeholder:"Seleccionar tipo",children:v(t.user_type)})}),e.jsx(u,{children:j.map(s=>e.jsx(m,{value:s,children:v(s)},s))})]}),a.user_type&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.user_type})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"role_id",children:"Rol"}),e.jsxs(p,{value:t.role_id,onValueChange:s=>i("role_id",s),children:[e.jsx(h,{className:"mt-1",children:e.jsx(x,{placeholder:"Seleccionar rol",children:C()})}),e.jsx(u,{children:l&&l.map(s=>e.jsx(m,{value:s.id.toString(),disabled:s.name==="Super admin"&&!F,children:s.name},s.id))})]}),a.role_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.role_id})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"status",type:"checkbox",checked:t.status,onChange:s=>i("status",s.target.checked),className:"rounded"}),e.jsx(d,{htmlFor:"status",children:"Usuario activo"}),a.status&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.status})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"is_verified",type:"checkbox",checked:t.is_verified,onChange:s=>i("is_verified",s.target.checked),className:"rounded"}),e.jsx(d,{htmlFor:"is_verified",children:"Email verificado"}),a.is_verified&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.is_verified})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"is_suspended",type:"checkbox",checked:t.is_suspended,onChange:s=>i("is_suspended",s.target.checked),className:"rounded"}),e.jsx(d,{htmlFor:"is_suspended",children:"Usuario suspendido"}),a.is_suspended&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.is_suspended})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"subscribed_to_news_letter",type:"checkbox",checked:t.subscribed_to_news_letter,onChange:s=>i("subscribed_to_news_letter",s.target.checked),className:"rounded"}),e.jsx(d,{htmlFor:"subscribed_to_news_letter",children:"Suscrito al newsletter"}),a.subscribed_to_news_letter&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.subscribed_to_news_letter})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Cambio de contraseña"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",children:"Nueva contraseña (opcional)"}),e.jsx(n,{id:"password",type:"password",value:t.password,onChange:s=>i("password",s.target.value),className:"mt-1",placeholder:"Dejar en blanco para no cambiar"}),a.password&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.password})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password_confirmation",children:"Confirmar nueva contraseña"}),e.jsx(n,{id:"password_confirmation",type:"password",value:t.password_confirmation,onChange:s=>i("password_confirmation",s.target.value),className:"mt-1",placeholder:"Solo si cambió la contraseña"}),a.password_confirmation&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.password_confirmation})]})]})]}),!1,e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancelar"}),e.jsx(N,{type:"submit",disabled:_,children:_?"Actualizando...":"Actualizar usuario"})]})]})})]})]})}export{ge as default};
