import{r as s,j as t,d as Ve,U as $e,H as _e,L as Ke}from"./app-DQczwFTk.js";import{A as Le}from"./app-layout-CxNCz1W0.js";import{B as X}from"./button-BYXnJyXv.js";import{u as ze,f as xe,d as qe,e as Oe,a as Be,b as He,g as Ue,c as Ge}from"./index-CwDE0SfU.js";import{T as Xe,a as We,b as le,c as Je,d as Ye,e as be}from"./table-J6M9UKS6.js";import{D as Qe,a as Ze}from"./data-table-view-options-NQL8x2eE.js";import{I as et}from"./input-goWATpHJ.js";import{c as T}from"./utils-CPN-yreq.js";import{B as A}from"./badge-CIPxAGrn.js";import{R as tt,P as rt,O as at,C as lt}from"./index-DcW1-0jE.js";import{P as F}from"./index-CnB8Y-kE.js";import{u as L}from"./index-CqVE9Fls.js";import{a as B}from"./index-D2mu7mBH.js";import{S as nt}from"./search-DPYN2drD.js";import{P as st,a as it,b as ot}from"./popover-PDQ3fITR.js";import{S as ct}from"./separator-Dm1V7ums.js";import{S as dt,a as ut,b as mt,c as pt,d as je}from"./select-D52pRjk-.js";import{C as ft}from"./circle-plus-BkaJThET.js";import{C as ht}from"./index-ClSqUjUN.js";import{X as gt}from"./x-CNv1352c.js";import{C as ye}from"./checkbox-Cvj9wDgC.js";import{D as $}from"./data-table-column-header-uei8EkBj.js";import{g as vt,T as xt,e as bt,f as jt}from"./app-sidebar-layout-DjIGW_b8.js";import{o as yt,s as q,c as wt,n as we}from"./schemas-BDuxrwph.js";import{EditRoleDialog as St}from"./edit-role-dialog-8jqcC6XO.js";import{S as Ct}from"./square-pen-NJFtVg51.js";import"./app-C-su-A41.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./cookie-consent-DYpW6VIi.js";import"./card-BNPG6E-E.js";import"./createLucideIcon-D40S4Mwt.js";import"./chevron-left-C9_3M9nq.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-BfMh8EvQ.js";import"./index-DSuT5VJt.js";import"./index-BOxxC3ps.js";import"./index-BVHM8iLO.js";import"./index-CJpv9kZ5.js";import"./index-7Ou4doz_.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";import"./eye-off-B_owjCxK.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./app-logo-icon-2MFPo7KO.js";import"./dialog-DHq7tLZ5.js";import"./form-9z_uuQ6M.js";import"./label-BchK1h47.js";var Se=1,Rt=.9,kt=.8,Nt=.17,ne=.1,se=.999,Et=.9999,It=.99,Ft=/[\\\/_+.#"@\[\(\{&]/,Mt=/[\\\/_+.#"@\[\(\{&]/g,At=/[\s-]/,Ee=/[\s-]/g;function oe(e,a,r,d,o,n,i){if(n===a.length)return o===e.length?Se:It;var p=`${o},${n}`;if(i[p]!==void 0)return i[p];for(var v=d.charAt(n),u=r.indexOf(v,o),h=0,x,C,j,N;u>=0;)x=oe(e,a,r,d,u+1,n+1,i),x>h&&(u===o?x*=Se:Ft.test(e.charAt(u-1))?(x*=kt,j=e.slice(o,u-1).match(Mt),j&&o>0&&(x*=Math.pow(se,j.length))):At.test(e.charAt(u-1))?(x*=Rt,N=e.slice(o,u-1).match(Ee),N&&o>0&&(x*=Math.pow(se,N.length))):(x*=Nt,o>0&&(x*=Math.pow(se,u-o))),e.charAt(u)!==a.charAt(n)&&(x*=Et)),(x<ne&&r.charAt(u-1)===d.charAt(n+1)||d.charAt(n+1)===d.charAt(n)&&r.charAt(u-1)!==d.charAt(n))&&(C=oe(e,a,r,d,u+1,n+2,i),C*ne>x&&(x=C*ne)),x>h&&(h=x),u=r.indexOf(v,u+1);return i[p]=h,h}function Ce(e){return e.toLowerCase().replace(Ee," ")}function Dt(e,a,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,oe(e,a,Ce(e),Ce(a),0,0,{})}var O='[cmdk-group=""]',ie='[cmdk-group-items=""]',Tt='[cmdk-group-heading=""]',Ie='[cmdk-item=""]',Re=`${Ie}:not([aria-disabled="true"])`,ce="cmdk-item-select",_="data-value",Pt=(e,a,r)=>Dt(e,a,r),Fe=s.createContext(void 0),H=()=>s.useContext(Fe),Me=s.createContext(void 0),de=()=>s.useContext(Me),Ae=s.createContext(void 0),De=s.forwardRef((e,a)=>{let r=K(()=>{var l,m;return{search:"",value:(m=(l=e.value)!=null?l:e.defaultValue)!=null?m:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=K(()=>new Set),o=K(()=>new Map),n=K(()=>new Map),i=K(()=>new Set),p=Te(e),{label:v,children:u,value:h,onValueChange:x,filter:C,shouldFilter:j,loop:N,disablePointerSelection:E=!1,vimBindings:w=!0,...U}=e,J=L(),ue=L(),Y=L(),M=s.useRef(null),y=Ut();D(()=>{if(h!==void 0){let l=h.trim();r.current.value=l,R.emit()}},[h]),D(()=>{y(6,pe)},[]);let R=s.useMemo(()=>({subscribe:l=>(i.current.add(l),()=>i.current.delete(l)),snapshot:()=>r.current,setState:(l,m,f)=>{var c,g,b,k;if(!Object.is(r.current[l],m)){if(r.current[l]=m,l==="search")te(),Z(),y(1,ee);else if(l==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let S=document.getElementById(Y);S?S.focus():(c=document.getElementById(J))==null||c.focus()}if(y(7,()=>{var S;r.current.selectedItemId=(S=V())==null?void 0:S.id,R.emit()}),f||y(5,pe),((g=p.current)==null?void 0:g.value)!==void 0){let S=m??"";(k=(b=p.current).onValueChange)==null||k.call(b,S);return}}R.emit()}},emit:()=>{i.current.forEach(l=>l())}}),[]),Q=s.useMemo(()=>({value:(l,m,f)=>{var c;m!==((c=n.current.get(l))==null?void 0:c.value)&&(n.current.set(l,{value:m,keywords:f}),r.current.filtered.items.set(l,me(m,f)),y(2,()=>{Z(),R.emit()}))},item:(l,m)=>(d.current.add(l),m&&(o.current.has(m)?o.current.get(m).add(l):o.current.set(m,new Set([l]))),y(3,()=>{te(),Z(),r.current.value||ee(),R.emit()}),()=>{n.current.delete(l),d.current.delete(l),r.current.filtered.items.delete(l);let f=V();y(4,()=>{te(),(f==null?void 0:f.getAttribute("id"))===l&&ee(),R.emit()})}),group:l=>(o.current.has(l)||o.current.set(l,new Set),()=>{n.current.delete(l),o.current.delete(l)}),filter:()=>p.current.shouldFilter,label:v||e["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:J,inputId:Y,labelId:ue,listInnerRef:M}),[]);function me(l,m){var f,c;let g=(c=(f=p.current)==null?void 0:f.filter)!=null?c:Pt;return l?g(l,r.current.search,m):0}function Z(){if(!r.current.search||p.current.shouldFilter===!1)return;let l=r.current.filtered.items,m=[];r.current.filtered.groups.forEach(c=>{let g=o.current.get(c),b=0;g.forEach(k=>{let S=l.get(k);b=Math.max(S,b)}),m.push([c,b])});let f=M.current;z().sort((c,g)=>{var b,k;let S=c.getAttribute("id"),G=g.getAttribute("id");return((b=l.get(G))!=null?b:0)-((k=l.get(S))!=null?k:0)}).forEach(c=>{let g=c.closest(ie);g?g.appendChild(c.parentElement===g?c:c.closest(`${ie} > *`)):f.appendChild(c.parentElement===f?c:c.closest(`${ie} > *`))}),m.sort((c,g)=>g[1]-c[1]).forEach(c=>{var g;let b=(g=M.current)==null?void 0:g.querySelector(`${O}[${_}="${encodeURIComponent(c[0])}"]`);b==null||b.parentElement.appendChild(b)})}function ee(){let l=z().find(f=>f.getAttribute("aria-disabled")!=="true"),m=l==null?void 0:l.getAttribute(_);R.setState("value",m||void 0)}function te(){var l,m,f,c;if(!r.current.search||p.current.shouldFilter===!1){r.current.filtered.count=d.current.size;return}r.current.filtered.groups=new Set;let g=0;for(let b of d.current){let k=(m=(l=n.current.get(b))==null?void 0:l.value)!=null?m:"",S=(c=(f=n.current.get(b))==null?void 0:f.keywords)!=null?c:[],G=me(k,S);r.current.filtered.items.set(b,G),G>0&&g++}for(let[b,k]of o.current)for(let S of k)if(r.current.filtered.items.get(S)>0){r.current.filtered.groups.add(b);break}r.current.filtered.count=g}function pe(){var l,m,f;let c=V();c&&(((l=c.parentElement)==null?void 0:l.firstChild)===c&&((f=(m=c.closest(O))==null?void 0:m.querySelector(Tt))==null||f.scrollIntoView({block:"nearest"})),c.scrollIntoView({block:"nearest"}))}function V(){var l;return(l=M.current)==null?void 0:l.querySelector(`${Ie}[aria-selected="true"]`)}function z(){var l;return Array.from(((l=M.current)==null?void 0:l.querySelectorAll(Re))||[])}function re(l){let m=z()[l];m&&R.setState("value",m.getAttribute(_))}function ae(l){var m;let f=V(),c=z(),g=c.findIndex(k=>k===f),b=c[g+l];(m=p.current)!=null&&m.loop&&(b=g+l<0?c[c.length-1]:g+l===c.length?c[0]:c[g+l]),b&&R.setState("value",b.getAttribute(_))}function fe(l){let m=V(),f=m==null?void 0:m.closest(O),c;for(;f&&!c;)f=l>0?Bt(f,O):Ht(f,O),c=f==null?void 0:f.querySelector(Re);c?R.setState("value",c.getAttribute(_)):ae(l)}let he=()=>re(z().length-1),ge=l=>{l.preventDefault(),l.metaKey?he():l.altKey?fe(1):ae(1)},ve=l=>{l.preventDefault(),l.metaKey?re(0):l.altKey?fe(-1):ae(-1)};return s.createElement(F.div,{ref:a,tabIndex:-1,...U,"cmdk-root":"",onKeyDown:l=>{var m;(m=U.onKeyDown)==null||m.call(U,l);let f=l.nativeEvent.isComposing||l.keyCode===229;if(!(l.defaultPrevented||f))switch(l.key){case"n":case"j":{w&&l.ctrlKey&&ge(l);break}case"ArrowDown":{ge(l);break}case"p":case"k":{w&&l.ctrlKey&&ve(l);break}case"ArrowUp":{ve(l);break}case"Home":{l.preventDefault(),re(0);break}case"End":{l.preventDefault(),he();break}case"Enter":{l.preventDefault();let c=V();if(c){let g=new Event(ce);c.dispatchEvent(g)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:Q.inputId,id:Q.labelId,style:Xt},v),W(e,l=>s.createElement(Me.Provider,{value:R},s.createElement(Fe.Provider,{value:Q},l))))}),Vt=s.forwardRef((e,a)=>{var r,d;let o=L(),n=s.useRef(null),i=s.useContext(Ae),p=H(),v=Te(e),u=(d=(r=v.current)==null?void 0:r.forceMount)!=null?d:i==null?void 0:i.forceMount;D(()=>{if(!u)return p.item(o,i==null?void 0:i.id)},[u]);let h=Pe(o,n,[e.value,e.children,n],e.keywords),x=de(),C=I(y=>y.value&&y.value===h.current),j=I(y=>u||p.filter()===!1?!0:y.search?y.filtered.items.get(o)>0:!0);s.useEffect(()=>{let y=n.current;if(!(!y||e.disabled))return y.addEventListener(ce,N),()=>y.removeEventListener(ce,N)},[j,e.onSelect,e.disabled]);function N(){var y,R;E(),(R=(y=v.current).onSelect)==null||R.call(y,h.current)}function E(){x.setState("value",h.current,!0)}if(!j)return null;let{disabled:w,value:U,onSelect:J,forceMount:ue,keywords:Y,...M}=e;return s.createElement(F.div,{ref:B(n,a),...M,id:o,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!C,"data-disabled":!!w,"data-selected":!!C,onPointerMove:w||p.getDisablePointerSelection()?void 0:E,onClick:w?void 0:N},e.children)}),$t=s.forwardRef((e,a)=>{let{heading:r,children:d,forceMount:o,...n}=e,i=L(),p=s.useRef(null),v=s.useRef(null),u=L(),h=H(),x=I(j=>o||h.filter()===!1?!0:j.search?j.filtered.groups.has(i):!0);D(()=>h.group(i),[]),Pe(i,p,[e.value,e.heading,v]);let C=s.useMemo(()=>({id:i,forceMount:o}),[o]);return s.createElement(F.div,{ref:B(p,a),...n,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},r&&s.createElement("div",{ref:v,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),W(e,j=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},s.createElement(Ae.Provider,{value:C},j))))}),_t=s.forwardRef((e,a)=>{let{alwaysRender:r,...d}=e,o=s.useRef(null),n=I(i=>!i.search);return!r&&!n?null:s.createElement(F.div,{ref:B(o,a),...d,"cmdk-separator":"",role:"separator"})}),Kt=s.forwardRef((e,a)=>{let{onValueChange:r,...d}=e,o=e.value!=null,n=de(),i=I(u=>u.search),p=I(u=>u.selectedItemId),v=H();return s.useEffect(()=>{e.value!=null&&n.setState("search",e.value)},[e.value]),s.createElement(F.input,{ref:a,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":v.listId,"aria-labelledby":v.labelId,"aria-activedescendant":p,id:v.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||n.setState("search",u.target.value),r==null||r(u.target.value)}})}),Lt=s.forwardRef((e,a)=>{let{children:r,label:d="Suggestions",...o}=e,n=s.useRef(null),i=s.useRef(null),p=I(u=>u.selectedItemId),v=H();return s.useEffect(()=>{if(i.current&&n.current){let u=i.current,h=n.current,x,C=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let j=u.offsetHeight;h.style.setProperty("--cmdk-list-height",j.toFixed(1)+"px")})});return C.observe(u),()=>{cancelAnimationFrame(x),C.unobserve(u)}}},[]),s.createElement(F.div,{ref:B(n,a),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":d,id:v.listId},W(e,u=>s.createElement("div",{ref:B(i,v.listInnerRef),"cmdk-list-sizer":""},u)))}),zt=s.forwardRef((e,a)=>{let{open:r,onOpenChange:d,overlayClassName:o,contentClassName:n,container:i,...p}=e;return s.createElement(tt,{open:r,onOpenChange:d},s.createElement(rt,{container:i},s.createElement(at,{"cmdk-overlay":"",className:o}),s.createElement(lt,{"aria-label":e.label,"cmdk-dialog":"",className:n},s.createElement(De,{ref:a,...p}))))}),qt=s.forwardRef((e,a)=>I(r=>r.filtered.count===0)?s.createElement(F.div,{ref:a,...e,"cmdk-empty":"",role:"presentation"}):null),Ot=s.forwardRef((e,a)=>{let{progress:r,children:d,label:o="Loading...",...n}=e;return s.createElement(F.div,{ref:a,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},W(e,i=>s.createElement("div",{"aria-hidden":!0},i)))}),P=Object.assign(De,{List:Lt,Item:Vt,Input:Kt,Group:$t,Separator:_t,Dialog:zt,Empty:qt,Loading:Ot});function Bt(e,a){let r=e.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function Ht(e,a){let r=e.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function Te(e){let a=s.useRef(e);return D(()=>{a.current=e}),a}var D=typeof window>"u"?s.useEffect:s.useLayoutEffect;function K(e){let a=s.useRef();return a.current===void 0&&(a.current=e()),a}function I(e){let a=de(),r=()=>e(a.snapshot());return s.useSyncExternalStore(a.subscribe,r,r)}function Pe(e,a,r,d=[]){let o=s.useRef(),n=H();return D(()=>{var i;let p=(()=>{var u;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(u=h.current.textContent)==null?void 0:u.trim():o.current}})(),v=d.map(u=>u.trim());n.value(e,p,v),(i=a.current)==null||i.setAttribute(_,p),o.current=p}),o}var Ut=()=>{let[e,a]=s.useState(),r=K(()=>new Map);return D(()=>{r.current.forEach(d=>d()),r.current=new Map},[e]),(d,o)=>{r.current.set(d,o),a({})}};function Gt(e){let a=e.type;return typeof a=="function"?a(e.props):"render"in a?a.render(e.props):e}function W({asChild:e,children:a},r){return e&&s.isValidElement(a)?s.cloneElement(Gt(a),{ref:a.ref},r(a.props.children)):r(a)}var Xt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Wt({className:e,...a}){return t.jsx(P,{"data-slot":"command",className:T("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...a})}function Jt({className:e,...a}){return t.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[t.jsx(nt,{className:"size-4 shrink-0 opacity-50"}),t.jsx(P.Input,{"data-slot":"command-input",className:T("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...a})]})}function Yt({className:e,...a}){return t.jsx(P.List,{"data-slot":"command-list",className:T("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...a})}function Qt({...e}){return t.jsx(P.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function ke({className:e,...a}){return t.jsx(P.Group,{"data-slot":"command-group",className:T("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...a})}function Zt({className:e,...a}){return t.jsx(P.Separator,{"data-slot":"command-separator",className:T("bg-border -mx-1 h-px",e),...a})}function Ne({className:e,...a}){return t.jsx(P.Item,{"data-slot":"command-item",className:T("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function er({column:e,title:a,options:r,selectMode:d=!1}){const o=e==null?void 0:e.getFacetedUniqueValues(),n=new Set(e==null?void 0:e.getFilterValue());return d?t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs(dt,{value:Array.from(n)[0]||"",onValueChange:i=>{e==null||e.setFilterValue(i==="all"?void 0:[i])},children:[t.jsx(ut,{className:"h-8 w-[180px]",children:t.jsx(mt,{placeholder:`Seleccionar ${a}`})}),t.jsxs(pt,{children:[t.jsx(je,{value:"all",children:"Todos"},"select-all"),r.filter(i=>i.value).map(i=>t.jsx(je,{value:i.value,children:i.label},`select-${i.value}`))]})]})}):t.jsxs(st,{children:[t.jsx(it,{asChild:!0,children:t.jsxs(X,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[t.jsx(ft,{className:"mr-2 h-4 w-4"}),a,(n==null?void 0:n.size)>0&&t.jsxs(t.Fragment,{children:[t.jsx(ct,{orientation:"vertical",className:"mx-2 h-4"}),t.jsx(A,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:n.size}),t.jsx("div",{className:"hidden space-x-1 lg:flex",children:n.size>2?t.jsxs(A,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[n.size," seleccionados"]}):r.filter(i=>n.has(i.value)).map(i=>t.jsx(A,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:i.label},`badge-${i.value}`))})]})]})}),t.jsx(ot,{className:"w-[200px] p-0",align:"start",children:t.jsxs(Wt,{children:[t.jsx(Jt,{placeholder:a}),t.jsxs(Yt,{children:[t.jsx(Qt,{children:"No se encontraron resultados"}),t.jsx(ke,{children:r.map(i=>{const p=n.has(i.value);return t.jsxs(Ne,{onSelect:()=>{p?n.delete(i.value):n.add(i.value);const v=Array.from(n);e==null||e.setFilterValue(v.length?v:void 0)},children:[t.jsx("div",{className:T("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",p?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:t.jsx(ht,{className:"h-4 w-4"})}),i.icon&&t.jsx(i.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:i.label}),(o==null?void 0:o.get(i.value))&&t.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:o.get(i.value)})]},`command-${i.value}`)})}),n.size>0&&t.jsxs(t.Fragment,{children:[t.jsx(Zt,{},"command-separator"),t.jsx(ke,{children:t.jsx(Ne,{onSelect:()=>e==null?void 0:e.setFilterValue(void 0),className:"justify-center text-center",children:"Limpiar filtros"},"command-clear")},"command-group-clear")]})]})]})})]})}function tr({table:e,guardOptions:a}){var d;const r=e.getState().columnFilters.length>0;return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex flex-1 items-center space-x-2",children:[t.jsx(et,{placeholder:"Filtrar por nombre",value:((d=e.getColumn("name"))==null?void 0:d.getFilterValue())??"",onChange:o=>{var n;return(n=e.getColumn("name"))==null?void 0:n.setFilterValue(o.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),t.jsx(er,{column:e.getColumn("guard_name"),title:"Guard",options:a.filter(o=>o.value),selectMode:!0}),r&&t.jsxs(X,{variant:"ghost",onClick:()=>e.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reiniciar",t.jsx(gt,{className:"ml-2 h-4 w-4"})]})]}),t.jsx(Qe,{table:e})]})}function rr({columns:e,data:a,filterKey:r,meta:d,guardOptions:o=[]}){var N;const[n,i]=s.useState({}),[p,v]=s.useState({}),[u,h]=s.useState([]),[x,C]=s.useState([]),j=ze({data:a,columns:e,meta:d,state:{sorting:x,columnVisibility:p,rowSelection:n,columnFilters:u},enableRowSelection:!0,onRowSelectionChange:i,onSortingChange:C,onColumnFiltersChange:h,onColumnVisibilityChange:v,getCoreRowModel:Ge(),getFilteredRowModel:Ue(),getPaginationRowModel:He(),getSortedRowModel:Be(),getFacetedRowModel:Oe(),getFacetedUniqueValues:qe()});return t.jsxs("div",{className:"space-y-4",children:[t.jsx(tr,{table:j,guardOptions:o}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(Xe,{children:[t.jsx(We,{children:j.getHeaderGroups().map(E=>t.jsx(le,{children:E.headers.map(w=>t.jsx(Je,{colSpan:w.colSpan,children:w.isPlaceholder?null:xe(w.column.columnDef.header,w.getContext())},w.id))},E.id))}),t.jsx(Ye,{children:(N=j.getRowModel().rows)!=null&&N.length?j.getRowModel().rows.map(E=>t.jsx(le,{"data-state":E.getIsSelected()&&"selected",children:E.getVisibleCells().map(w=>t.jsx(be,{children:xe(w.column.columnDef.cell,w.getContext())},w.id))},E.id)):t.jsx(le,{children:t.jsx(be,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})]})}),t.jsx(Ze,{table:j})]})}const ar=yt({id:we(),name:q(),users_count:we(),guard_name:q().optional().default("web"),permissions:wt(q()).optional(),created_at:q().optional(),updated_at:q().optional()});function lr({row:e}){const[a,r]=s.useState(!1),d=ar.parse(e.original);return t.jsxs(t.Fragment,{children:[t.jsxs(X,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",onClick:()=>r(!0),children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Edit"})]}),t.jsx(St,{roleId:d.id,open:a,onOpenChange:r})]})}const nr=[{id:"select",header:({table:e})=>t.jsx(ye,{checked:e.getIsAllPageRowsSelected(),onCheckedChange:a=>e.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:e})=>t.jsx(ye,{checked:e.getIsSelected(),onCheckedChange:a=>e.toggleSelected(!!a),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:e})=>t.jsx($,{column:e,title:"Nombre"}),cell:({row:e})=>t.jsxs("div",{className:"font-medium",children:[e.original.name,e.original.name==="Super admin"&&t.jsx(A,{variant:"destructive",className:"ml-2",children:"Sistema"})]})},{accessorKey:"guard_name",header:({column:e})=>t.jsx($,{column:e,title:"Guard"}),cell:({row:e})=>t.jsx(A,{variant:"outline",children:e.original.guard_name})},{accessorKey:"permissions",header:({column:e})=>t.jsx($,{column:e,title:"Permisos"}),cell:({row:e})=>{const a=e.original.permissions||[];return t.jsx(vt,{children:t.jsxs(xt,{children:[t.jsx(bt,{asChild:!0,children:t.jsxs(A,{variant:"outline",className:"cursor-pointer",children:[a.length," permisos"]})}),t.jsx(jt,{className:"max-w-[300px]",children:t.jsx("div",{className:"grid grid-cols-2 gap-1",children:a.map(r=>t.jsx(A,{variant:"secondary",className:"truncate text-xs",children:r},r))})})]})})}},{accessorKey:"users_count",header:({column:e})=>t.jsx($,{column:e,title:"Usuarios"}),cell:({row:e})=>e.original.users_count},{accessorKey:"permissions_count",header:({column:e})=>t.jsx($,{column:e,title:"Permisos"}),cell:({row:e})=>e.original.permissions_count},{accessorKey:"created_at",header:({column:e})=>t.jsx($,{column:e,title:"Creado"}),cell:({row:e})=>new Date(e.original.created_at).toLocaleDateString()},{id:"actions",cell:({row:e,table:a})=>{var r;return t.jsx(lr,{row:e,permissions:((r=a.options.meta)==null?void 0:r.permissions)||[]})}}],sr=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Seguridad",href:"#"},{title:"Roles",href:"/admin/roles"}];function ma(){const{roles:e,permissionsByGroup:a,filters:r,guards:d}=Ve().props,o=$e.useMemo(()=>Array.isArray(d)?d.filter(n=>typeof n=="string").map(n=>({label:n,value:n})):typeof d=="object"&&d!==null?Object.keys(d).filter(n=>typeof n=="string").map(n=>({label:n,value:n})):[],[d]);return t.jsxs(Le,{breadcrumbs:sr,children:[t.jsx(_e,{title:"Gestión de Roles"}),t.jsxs("div",{className:"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex",children:[t.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Gestión de Roles"}),t.jsx("p",{className:"text-muted-foreground",children:"Administra los roles y sus permisos asociados"})]}),t.jsx(Ke,{href:route("admin.roles.create"),children:t.jsx(X,{children:"Crear Nuevo Rol"})})]}),t.jsx("div",{children:t.jsx(rr,{columns:nr,data:e,guardOptions:o,meta:{permissions:a}})})]})]})}export{ma as default};
