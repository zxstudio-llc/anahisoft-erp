import{j as e,r as d,L as f,a as v,H as F}from"./app-DQczwFTk.js";import{A as M}from"./app-layout-CxNCz1W0.js";import{u as P,f as x,d as V,e as _,a as I,b as k,g as E,c as K}from"./index-CwDE0SfU.js";import{T as A,a as H,b as p,c as B,d as q,e as h}from"./table-J6M9UKS6.js";import{D as L,a as U}from"./data-table-view-options-NQL8x2eE.js";import{B as b}from"./button-BYXnJyXv.js";import{I as $}from"./input-goWATpHJ.js";import{X as O}from"./x-CNv1352c.js";import{C as g}from"./checkbox-Cvj9wDgC.js";import{D as r}from"./data-table-column-header-uei8EkBj.js";import{D as X,a as z,b as G,c as j}from"./dropdown-menu-DWIT9g2E.js";import{o as J,s as i,b as Q,n as W,c as Y}from"./schemas-BDuxrwph.js";import{E as Z}from"./ellipsis-YiHoVY6K.js";import{P as ee}from"./pencil-Chy_hZuP.js";import{T as te}from"./trash-2-b2Qe_qpo.js";import{B as se}from"./badge-CIPxAGrn.js";import{f as ae}from"./format-CMqicXTs.js";import"./app-C-su-A41.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-BVHM8iLO.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-CX1ZUDb2.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./card-BNPG6E-E.js";import"./select-D52pRjk-.js";import"./index-BfMh8EvQ.js";import"./index-7Ou4doz_.js";import"./chevron-down-Bqmppv4h.js";import"./chevron-left-C9_3M9nq.js";import"./eye-off-B_owjCxK.js";import"./index-CJpv9kZ5.js";function ie({table:t}){var o;const s=t.getState().columnFilters.length>0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-2",children:[e.jsx($,{placeholder:"Filtra por nombre",value:((o=t.getColumn("title"))==null?void 0:o.getFilterValue())??"",onChange:m=>{var c;return(c=t.getColumn("title"))==null?void 0:c.setFilterValue(m.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),s&&e.jsxs(b,{variant:"ghost",onClick:()=>t.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(O,{})]})]}),e.jsx(L,{table:t})]})}function le({columns:t,data:s,filterKey:o,meta:m}){var u;const[c,N]=d.useState({}),[C,S]=d.useState({}),[y,R]=d.useState([]),[D,T]=d.useState([]),n=P({data:s,columns:t,meta:m,state:{sorting:D,columnVisibility:C,rowSelection:c,columnFilters:y},enableRowSelection:!0,onRowSelectionChange:N,onSortingChange:T,onColumnFiltersChange:R,onColumnVisibilityChange:S,getCoreRowModel:K(),getFilteredRowModel:E(),getPaginationRowModel:k(),getSortedRowModel:I(),getFacetedRowModel:_(),getFacetedUniqueValues:V()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(ie,{table:n}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(H,{children:n.getHeaderGroups().map(l=>e.jsx(p,{children:l.headers.map(a=>e.jsx(B,{colSpan:a.colSpan,children:a.isPlaceholder?null:x(a.column.columnDef.header,a.getContext())},a.id))},l.id))}),e.jsx(q,{children:(u=n.getRowModel().rows)!=null&&u.length?n.getRowModel().rows.map(l=>e.jsx(p,{"data-state":l.getIsSelected()&&"selected",children:l.getVisibleCells().map(a=>e.jsx(h,{children:x(a.column.columnDef.cell,a.getContext())},a.id))},l.id)):e.jsx(p,{children:e.jsx(h,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(U,{table:n})]})}const w=J({id:W(),title:i(),slug:i(),excerpt:i().nullable(),content:i().nullable(),published_at:i().nullable(),is_published:Q(),image_url:i().nullable(),created_at:i(),updated_at:i()});function re({row:t}){const s=w.parse(t.original),o=()=>{confirm("¿Estás seguro de eliminar esta noticia?")&&v.delete(`/admin/news/${s.id}`)};return e.jsx("div",{className:"flex justify-end",children:e.jsxs(X,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(G,{align:"end",className:"w-[160px]",children:[e.jsx(j,{asChild:!0,children:e.jsx(f,{href:`/admin/news/${s.id}/edit`,className:"w-full cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Editar"})]})})}),e.jsx(j,{className:"text-red-600 cursor-pointer",onClick:o,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Eliminar"})]})})]})]})})}const oe=()=>[{id:"select",header:({table:t})=>e.jsx(g,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>t.toggleAllPageRowsSelected(!!s),"aria-label":"Select all"}),cell:({row:t})=>e.jsx(g,{checked:t.getIsSelected(),onCheckedChange:s=>t.toggleSelected(!!s),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:t})=>e.jsx(r,{column:t,title:"ID"}),cell:({row:t})=>e.jsx("div",{className:"w-[50px]",children:t.getValue("id")})},{accessorKey:"image_url",header:({column:t})=>e.jsx(r,{column:t,title:"Imagen"}),cell:({row:t})=>{const s=t.getValue("image_url");return s?e.jsx("img",{src:s,alt:"Noticia",className:"h-10 w-auto object-cover rounded"}):e.jsx("span",{className:"text-gray-400",children:"Sin imagen"})}},{accessorKey:"title",header:({column:t})=>e.jsx(r,{column:t,title:"Título"})},{accessorKey:"slug",header:({column:t})=>e.jsx(r,{column:t,title:"Slug"})},{accessorKey:"is_published",header:({column:t})=>e.jsx(r,{column:t,title:"Estado"}),cell:({row:t})=>{const s=t.getValue("is_published");return e.jsx(se,{variant:s?"default":"secondary",children:s?"Publicado":"No publicado"})}},{accessorKey:"published_at",header:({column:t})=>e.jsx(r,{column:t,title:"Fecha de publicación"}),cell:({row:t})=>{const s=t.getValue("published_at");return s?ae(new Date(s),"PP"):"No publicado"}},{id:"actions",cell:({row:t})=>e.jsx(re,{row:t})}],ne=[{title:"Dashboard",href:"/admin"},{title:"Noticias",href:"/admin/news"}];function dt({news:t}){const s=Y(w).parse(t.data);return e.jsxs(M,{breadcrumbs:ne,children:[e.jsx(F,{title:"Noticias"}),e.jsxs("div",{className:"flex-1 space-y-4 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Noticias"}),e.jsx("p",{className:"text-muted-foreground",children:"Administra todas las noticias desde aquí"})]}),e.jsx(f,{href:"/admin/news/create",className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90",children:"Crear Noticia"})]}),e.jsx(le,{columns:oe(),data:s,filterKey:"title"})]})]})}export{dt as default};
