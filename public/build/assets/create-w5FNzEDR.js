import{j as e,H as f,L as b,a as v}from"./app-DQczwFTk.js";import{u as g,F as C,a as i,b as a,c as n,d as m,e as c,f as y}from"./form-9z_uuQ6M.js";import{A as N}from"./app-layout-CxNCz1W0.js";import{B as u}from"./button-BYXnJyXv.js";import{C as w,d as F}from"./card-BNPG6E-E.js";import{I as x}from"./input-goWATpHJ.js";import{T as E}from"./textarea-DHAakLHN.js";import{S}from"./switch-x9PZ-zT7.js";import{A as _,a as A,b as T}from"./avatar-CLHvFKAC.js";import{t as h}from"./index-Cou6Ygo0.js";import{Z as L,o as k,b as H,_ as I,s as j}from"./schemas-BDuxrwph.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./label-BchK1h47.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-CX1ZUDb2.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BfMh8EvQ.js";import"./index-CJpv9kZ5.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./index-7Ou4doz_.js";const R=s=>async p=>{try{return{values:await s.parseAsync(p),errors:{}}}catch(t){if(t instanceof L){const l={};return t.errors.forEach(r=>{r.path&&(l[r.path.join(".")]={message:r.message})}),{values:{},errors:l}}throw t}},D=[{title:"Panel",href:"/admin"},{title:"Testimonios",href:"/admin/testimonials"},{title:"Crear",href:"/admin/testimonials/create"}],Z=k({name:j().min(2,"El nombre debe tener al menos 2 caracteres").max(100),position:j().max(100).optional(),message:j().min(10,"El mensaje debe tener al menos 10 caracteres").max(500),photo:I(File).nullable().optional(),is_active:H().default(!0)});function Ae(){const s=g({resolver:R(Z),defaultValues:{name:"",position:"",message:"",photo:null,is_active:!0}}),{watch:p}=s,t=p("photo"),l=async r=>{try{const o=new FormData;o.append("name",r.name),o.append("position",r.position||""),o.append("message",r.message),o.append("is_active",r.is_active?"1":"0"),r.photo&&o.append("photo",r.photo),await v.post("/admin/testimonials",o,{onSuccess:()=>{h.success("Testimonio creado correctamente",{description:"El testimonio se ha guardado exitosamente"}),s.reset()},onError:d=>{h.error("Error al crear el testimonio",{description:"Hubo un problema al guardar el testimonio"})}})}catch{h.error("Error inesperado",{description:"Hubo un problema al procesar el formulario"})}};return e.jsxs(N,{breadcrumbs:D,children:[e.jsx(f,{title:"Crear Testimonio"}),e.jsxs("div",{className:"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Crear nuevo testimonio"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete los datos del nuevo testimonio"})]})}),e.jsx(w,{children:e.jsx(F,{className:"pt-6",children:e.jsx(C,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(l),className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"space-y-6 flex-1",children:[e.jsx(i,{control:s.control,name:"name",render:({field:r})=>e.jsxs(a,{children:[e.jsx(n,{children:"Nombre completo"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Nombre del cliente",...r})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"position",render:({field:r})=>e.jsxs(a,{children:[e.jsx(n,{children:"Cargo o empresa"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Ej: CEO de Empresa XYZ",...r})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"message",render:({field:r})=>e.jsxs(a,{children:[e.jsx(n,{children:"Testimonio"}),e.jsx(m,{children:e.jsx(E,{placeholder:"QuÃ© dice el cliente sobre tu servicio/producto",className:"min-h-[120px]",...r})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6 w-full md:w-1/3",children:[e.jsx(i,{control:s.control,name:"photo",render:({field:r})=>e.jsxs(a,{children:[e.jsx(n,{children:"Foto del cliente"}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(_,{className:"w-32 h-32",children:t?e.jsx(A,{src:URL.createObjectURL(t)}):e.jsx(T,{children:"CN"})}),e.jsx(x,{type:"file",accept:"image/*",onChange:o=>{var d;r.onChange(((d=o.target.files)==null?void 0:d[0])||null)}})]})}),e.jsx(c,{})]})}),e.jsx(i,{control:s.control,name:"is_active",render:({field:r})=>e.jsxs(a,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Estado"}),e.jsx(y,{children:"Activar/desactivar este testimonio"})]}),e.jsx(m,{children:e.jsx(S,{checked:r.value,onCheckedChange:r.onChange})})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(u,{variant:"outline",type:"button",asChild:!0,children:e.jsx(b,{href:"/admin/testimonials",children:"Cancelar"})}),e.jsx(u,{type:"submit",disabled:s.formState.isSubmitting,children:s.formState.isSubmitting?"Guardando...":"Guardar Testimonio"})]})]})})})})]})]})}export{Ae as default};
