import{U as p,r as m,u as F,j as n}from"./app-DQczwFTk.js";import{B as X}from"./button-BYXnJyXv.js";import{I as O}from"./input-goWATpHJ.js";import{L as j}from"./label-BchK1h47.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";function M(){return(M=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e}).apply(this,arguments)}function q(e,r){if(e==null)return{};var o,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)r.indexOf(o=s[t])>=0||(a[o]=e[o]);return a}function S(e){var r=m.useRef(e),o=m.useRef(function(t){r.current&&r.current(t)});return r.current=e,o.current}var C=function(e,r,o){return r===void 0&&(r=0),o===void 0&&(o=1),e>o?o:e<r?r:e},N=function(e){return"touches"in e},T=function(e){return e&&e.ownerDocument.defaultView||self},D=function(e,r,o){var t=e.getBoundingClientRect(),a=N(r)?function(s,i){for(var l=0;l<s.length;l++)if(s[l].identifier===i)return s[l];return s[0]}(r.touches,o):r;return{left:C((a.pageX-(t.left+T(e).pageXOffset))/t.width),top:C((a.pageY-(t.top+T(e).pageYOffset))/t.height)}},L=function(e){!N(e)&&e.preventDefault()},B=p.memo(function(e){var r=e.onMove,o=e.onKey,t=q(e,["onMove","onKey"]),a=m.useRef(null),s=S(r),i=S(o),l=m.useRef(null),u=m.useRef(!1),d=m.useMemo(function(){var c=function(x){L(x),(N(x)?x.touches.length>0:x.buttons>0)&&a.current?s(D(a.current,x,l.current)):E(!1)},v=function(){return E(!1)};function E(x){var h=u.current,b=T(a.current),_=x?b.addEventListener:b.removeEventListener;_(h?"touchmove":"mousemove",c),_(h?"touchend":"mouseup",v)}return[function(x){var h=x.nativeEvent,b=a.current;if(b&&(L(h),!function(A,P){return P&&!N(A)}(h,u.current)&&b)){if(N(h)){u.current=!0;var _=h.changedTouches||[];_.length&&(l.current=_[0].identifier)}b.focus(),s(D(b,h,l.current)),E(!0)}},function(x){var h=x.which||x.keyCode;h<37||h>40||(x.preventDefault(),i({left:h===39?.05:h===37?-.05:0,top:h===40?.05:h===38?-.05:0}))},E]},[i,s]),g=d[0],y=d[1],w=d[2];return m.useEffect(function(){return w},[w]),p.createElement("div",M({},t,{onTouchStart:g,onMouseDown:g,className:"react-colorful__interactive",ref:a,onKeyDown:y,tabIndex:0,role:"slider"}))}),z=function(e){return e.filter(Boolean).join(" ")},K=function(e){var r=e.color,o=e.left,t=e.top,a=t===void 0?.5:t,s=z(["react-colorful__pointer",e.className]);return p.createElement("div",{className:s,style:{top:100*a+"%",left:100*o+"%"}},p.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:r}}))},f=function(e,r,o){return r===void 0&&(r=0),o===void 0&&(o=Math.pow(10,r)),Math.round(o*e)/o},U=function(e){return Q(I(e))},I=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?f(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?f(parseInt(e.substring(6,8),16)/255,2):1}},V=function(e){return J(W(e))},Y=function(e){var r=e.s,o=e.v,t=e.a,a=(200-r)*o/100;return{h:f(e.h),s:f(a>0&&a<200?r*o/100/(a<=100?a:200-a)*100:0),l:f(a/2),a:f(t,2)}},H=function(e){var r=Y(e);return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},W=function(e){var r=e.h,o=e.s,t=e.v,a=e.a;r=r/360*6,o/=100,t/=100;var s=Math.floor(r),i=t*(1-o),l=t*(1-(r-s)*o),u=t*(1-(1-r+s)*o),d=s%6;return{r:f(255*[t,l,i,i,u,t][d]),g:f(255*[u,t,t,l,i,i][d]),b:f(255*[i,i,u,t,t,l][d]),a:f(a,2)}},k=function(e){var r=e.toString(16);return r.length<2?"0"+r:r},J=function(e){var r=e.r,o=e.g,t=e.b,a=e.a,s=a<1?k(f(255*a)):"";return"#"+k(r)+k(o)+k(t)+s},Q=function(e){var r=e.r,o=e.g,t=e.b,a=e.a,s=Math.max(r,o,t),i=s-Math.min(r,o,t),l=i?s===r?(o-t)/i:s===o?2+(t-r)/i:4+(r-o)/i:0;return{h:f(60*(l<0?l+6:l)),s:f(s?i/s*100:0),v:f(s/255*100),a}},Z=p.memo(function(e){var r=e.hue,o=e.onChange,t=z(["react-colorful__hue",e.className]);return p.createElement("div",{className:t},p.createElement(B,{onMove:function(a){o({h:360*a.left})},onKey:function(a){o({h:C(r+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":f(r),"aria-valuemax":"360","aria-valuemin":"0"},p.createElement(K,{className:"react-colorful__hue-pointer",left:r/360,color:H({h:r,s:100,v:100,a:1})})))}),G=p.memo(function(e){var r=e.hsva,o=e.onChange,t={backgroundColor:H({h:r.h,s:100,v:100,a:1})};return p.createElement("div",{className:"react-colorful__saturation",style:t},p.createElement(B,{onMove:function(a){o({s:100*a.left,v:100-100*a.top})},onKey:function(a){o({s:C(r.s+100*a.left,0,100),v:C(r.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+f(r.s)+"%, Brightness "+f(r.v)+"%"},p.createElement(K,{className:"react-colorful__saturation-pointer",top:1-r.v/100,left:r.s/100,color:H(r)})))}),$=function(e,r){if(e===r)return!0;for(var o in e)if(e[o]!==r[o])return!1;return!0},ee=function(e,r){return e.toLowerCase()===r.toLowerCase()||$(I(e),I(r))};function re(e,r,o){var t=S(o),a=m.useState(function(){return e.toHsva(r)}),s=a[0],i=a[1],l=m.useRef({color:r,hsva:s});m.useEffect(function(){if(!e.equal(r,l.current.color)){var d=e.toHsva(r);l.current={hsva:d,color:r},i(d)}},[r,e]),m.useEffect(function(){var d;$(s,l.current.hsva)||e.equal(d=e.fromHsva(s),l.current.color)||(l.current={hsva:s,color:d},t(d))},[s,e,t]);var u=m.useCallback(function(d){i(function(g){return Object.assign({},g,d)})},[]);return[s,u]}var oe=typeof window<"u"?m.useLayoutEffect:m.useEffect,te=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},R=new Map,ne=function(e){oe(function(){var r=e.current?e.current.ownerDocument:document;if(r!==void 0&&!R.has(r)){var o=r.createElement("style");o.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,R.set(r,o);var t=te();t&&o.setAttribute("nonce",t),r.head.appendChild(o)}},[])},ae=function(e){var r=e.className,o=e.colorModel,t=e.color,a=t===void 0?o.defaultColor:t,s=e.onChange,i=q(e,["className","colorModel","color","onChange"]),l=m.useRef(null);ne(l);var u=re(o,a,s),d=u[0],g=u[1],y=z(["react-colorful",r]);return p.createElement("div",M({},i,{ref:l,className:y}),p.createElement(G,{hsva:d,onChange:g}),p.createElement(Z,{hue:d.h,onChange:g,className:"react-colorful__last-control"}))},se={defaultColor:"000",toHsva:U,fromHsva:function(e){return V({h:e.h,s:e.s,v:e.v,a:1})},equal:ee},le=function(e){return p.createElement(ae,M({},e,{colorModel:se}))};const ce={primary:"#3b82f6",secondary:"#10b981",accent:"#8b5cf6",background:"#ffffff",text:"#111827",border:"#e5e7eb",success:"#10b981",warning:"#f59e0b",danger:"#ef4444"};function ge({theme:e}){const r=!!e,{data:o,setData:t,post:a,put:s,processing:i,errors:l}=F({name:(e==null?void 0:e.name)||"",type:(e==null?void 0:e.type)||"web",colors:(e==null?void 0:e.colors)||ce,styles:(e==null?void 0:e.styles)||{}}),[u,d]=m.useState(Object.keys(o.colors)[0]),g=c=>{c.preventDefault(),r?s(route("admin.themes.update",e.id)):a(route("admin.themes.store"))},y=()=>{const c=`color_${Object.keys(o.colors).length+1}`;t("colors",{...o.colors,[c]:"#000000"}),d(c)},w=c=>{const v={...o.colors};delete v[c],t("colors",v),d(Object.keys(v)[0])};return n.jsxs("div",{className:"container mx-auto py-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:r?`Editando Tema: ${e.name}`:"Crear Nuevo Tema"}),n.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(j,{htmlFor:"name",children:"Nombre del Tema"}),n.jsx(O,{id:"name",value:o.name,onChange:c=>t("name",c.target.value),className:"mt-1",required:!0}),l.name&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.name})]}),n.jsxs("div",{children:[n.jsx(j,{htmlFor:"type",children:"Tipo"}),n.jsxs("select",{id:"type",value:o.type,onChange:c=>t("type",c.target.value),className:"w-full px-3 py-2 border rounded-md mt-1",required:!0,children:[n.jsx("option",{value:"web",children:"Web Pública"}),n.jsx("option",{value:"dashboard",children:"Dashboard Admin"})]})]})]}),n.jsxs("div",{children:[n.jsx(j,{children:"Colores del Tema"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 mb-4",children:[Object.entries(o.colors).map(([c,v])=>n.jsx("div",{onClick:()=>d(c),className:`w-8 h-8 rounded-full border-2 cursor-pointer ${u===c?"border-gray-900":"border-transparent"}`,style:{backgroundColor:v},title:`${c}: ${v}`},c)),n.jsx("button",{type:"button",onClick:y,className:"w-8 h-8 rounded-full border-2 border-dashed flex items-center justify-center text-gray-500 hover:bg-gray-100",children:"+"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j,{children:"Nombre del Color"}),n.jsx(O,{value:u,onChange:c=>{const v={...o.colors};v[c.target.value]=v[u],delete v[u],t("colors",v),d(c.target.value)},className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(j,{children:"Valor HEX"}),n.jsxs("div",{className:"flex mt-1",children:[n.jsx(O,{value:o.colors[u],onChange:c=>t("colors",{...o.colors,[u]:c.target.value}),className:"rounded-r-none"}),n.jsx("button",{type:"button",onClick:()=>w(u),className:"px-3 py-2 bg-red-500 text-white rounded-r-md hover:bg-red-600",disabled:Object.keys(o.colors).length<=1,children:"×"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(j,{children:"Estilos CSS Personalizados"}),n.jsx("textarea",{value:o.styles.custom_css||"",onChange:c=>t("styles",{...o.styles,custom_css:c.target.value}),className:"w-full h-40 px-3 py-2 border rounded-md mt-1 font-mono text-sm",placeholder:".custom-class {\\n  property: value;\\n}"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border rounded-lg p-6",children:[n.jsx(j,{children:"Selector de Color"}),n.jsxs("div",{className:"mt-2",children:[n.jsx(le,{color:o.colors[u],onChange:c=>t("colors",{...o.colors,[u]:c}),className:"w-full"}),n.jsx("div",{className:"mt-2",children:n.jsxs("span",{className:"text-sm",children:[u,": ",o.colors[u]]})})]})]}),n.jsxs("div",{className:"border rounded-lg p-6",children:[n.jsx("h3",{className:"font-medium mb-4",children:"Previsualización"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:o.colors.background},children:[n.jsx("h4",{className:"font-semibold mb-2",style:{color:o.colors.text},children:"Título de Ejemplo"}),n.jsx("p",{className:"text-sm mb-3",style:{color:o.colors.text},children:"Este es un texto de ejemplo que muestra cómo se vería el contenido con este tema."}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("span",{className:"px-3 py-1 rounded-md text-sm",style:{backgroundColor:o.colors.primary,color:"white"},children:"Botón Primario"}),n.jsx("span",{className:"px-3 py-1 rounded-md text-sm",style:{backgroundColor:o.colors.secondary,color:"white"},children:"Botón Secundario"})]})]}),n.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:o.colors.border,backgroundColor:o.colors.background},children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium",style:{color:o.colors.text},children:"Alerta de Éxito"}),n.jsx("span",{className:"px-2 py-1 rounded-full text-xs",style:{backgroundColor:o.colors.success+"20",color:o.colors.success},children:"Success"})]}),n.jsx("p",{className:"text-sm",style:{color:o.colors.text},children:"Esta es una alerta de éxito de ejemplo."})]})]})]}),n.jsx(X,{type:"submit",disabled:i,className:"w-full",children:r?"Actualizar Tema":"Crear Tema"})]})]})]})}export{ge as default};
