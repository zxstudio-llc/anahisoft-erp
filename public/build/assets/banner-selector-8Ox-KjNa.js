import{r as x,j as e}from"./app-DQczwFTk.js";import{B as o}from"./button-BYXnJyXv.js";import{D as v,a as b,b as f,c as N,d as y}from"./dialog-DHq7tLZ5.js";import{I as a}from"./input-goWATpHJ.js";import{L as r}from"./label-BchK1h47.js";import{S}from"./switch-x9PZ-zT7.js";import{I as C}from"./image-dropzone-B7t8X9ae.js";import{S as I,a as k,b as B,c as _,d as p}from"./select-D52pRjk-.js";import"./app-C-su-A41.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-7Ou4doz_.js";import"./index-ClSqUjUN.js";import"./card-BNPG6E-E.js";import"./index-Cou6Ygo0.js";import"./trash-2-b2Qe_qpo.js";import"./index-BfMh8EvQ.js";import"./index-BOxxC3ps.js";import"./index-CX1ZUDb2.js";import"./chevron-down-Bqmppv4h.js";function ae({banners:m=[],value:c,onChange:h,onCreateNew:u}){const[j,d]=x.useState(!1),[t,n]=x.useState({title:"",subtitle:"",link:"",is_active:!0,published_at:"",image:null}),l=m.find(i=>i.id===c)||null,g=async()=>{try{const i=await u(t);h(i),d(!1),n({title:"",subtitle:"",link:"",is_active:!0,published_at:"",image:null})}catch(i){console.error("Error creating banner:",i)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{children:"Seleccionar Banner"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{value:(c==null?void 0:c.toString())??"none",onValueChange:i=>h(i==="none"?null:parseInt(i)),children:[e.jsx(k,{className:"flex-1",children:e.jsx(B,{placeholder:"Selecciona un banner existente"})}),e.jsxs(_,{children:[e.jsx(p,{value:"none",children:"Ninguno (crear nuevo)"}),m.map(i=>e.jsx(p,{value:i.id.toString(),children:i.title||`Banner #${i.id}`},i.id))]})]}),e.jsxs(v,{open:j,onOpenChange:d,children:[e.jsx(b,{asChild:!0,children:e.jsx(o,{variant:"outline",disabled:!!c,children:"Crear Nuevo"})}),e.jsxs(f,{className:"max-w-2xl",children:[e.jsx(N,{children:e.jsx(y,{children:"Crear Nuevo Banner"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(r,{htmlFor:"image",children:"Imagen"}),e.jsx(C,{image:t.image,onImageChange:i=>n(s=>({...s,image:i})),collectionName:"banners_covers",title:"Portada del banner",description:"Imagen principal que aparecerá en el listado"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"title",children:"Título"}),e.jsx(a,{id:"title",value:t.title,onChange:i=>n(s=>({...s,title:i.target.value})),placeholder:"Título del banner"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subtitle",children:"Subtítulo"}),e.jsx(a,{id:"subtitle",value:t.subtitle,onChange:i=>n(s=>({...s,subtitle:i.target.value})),placeholder:"Subtítulo del banner"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"link",children:"Enlace"}),e.jsx(a,{id:"link",type:"url",value:t.link,onChange:i=>n(s=>({...s,link:i.target.value})),placeholder:"https://ejemplo.com"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"is_active",children:"Activo"}),e.jsx(S,{id:"is_active",checked:t.is_active,onCheckedChange:i=>n(s=>({...s,is_active:i}))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(o,{onClick:g,children:"Crear Banner"})]})]})]})]}),l&&e.jsxs("div",{className:"grid gap-4 border p-4 rounded-lg bg-muted/50",children:[l.image&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Imagen"}),e.jsx("img",{src:l.image,alt:"Imagen del banner",className:"rounded-lg border w-full h-auto object-cover"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"ID"}),e.jsx(a,{value:l.id,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Título"}),e.jsx(a,{value:l.title||"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Subtítulo"}),e.jsx(a,{value:l.subtitle||"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Link"}),e.jsx(a,{value:l.link||"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Publicado"}),e.jsx(a,{value:l.published_at||"No disponible",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Estado"}),e.jsx(a,{value:l.is_active?"Activo":"Inactivo",readOnly:!0})]})]}),e.jsx(o,{variant:"secondary",children:"Editar Banner"})]})]})}export{ae as BannerSelector};
