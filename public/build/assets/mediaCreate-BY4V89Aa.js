import{r as s,j as e,H as E,a as A}from"./app-DQczwFTk.js";import{I as n}from"./input-goWATpHJ.js";import{L as c}from"./label-BchK1h47.js";import{B as h}from"./button-BYXnJyXv.js";import{D as I,a as P,b as U,d as H,e as w,c as y}from"./dropdown-menu-DWIT9g2E.js";import{C as L}from"./chevron-down-Bqmppv4h.js";import"./app-C-su-A41.js";import"./utils-CPN-yreq.js";import"./index-CnB8Y-kE.js";import"./index-CTC3mW-r.js";import"./index-D2mu7mBH.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-BfMh8EvQ.js";import"./index-DSuT5VJt.js";import"./index-CqVE9Fls.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BVHM8iLO.js";import"./index-CJpv9kZ5.js";function ae({media:l}){const[a,m]=s.useState({name:"",custom_properties:[]}),[o,d]=s.useState({key:"",value:""}),[i,u]=s.useState(""),[f,j]=s.useState(null),[v,g]=s.useState(!1),[_,S]=s.useState(!1),[C,p]=s.useState(null),[D,x]=s.useState(!1),k=s.useMemo(()=>{var N;const t=["default","unattached","page"],r=new Set(t);return(N=l==null?void 0:l.data)==null||N.forEach(b=>{b.collection_name&&r.add(b.collection_name)}),Array.from(r)},[l]),F=()=>{o.key.trim()&&o.value.trim()&&(m(t=>({...t,custom_properties:[...t.custom_properties,o]})),d({key:"",value:""}))},M=()=>{if(!f||!a.name.trim()||!i.trim()){p("Todos los campos son obligatorios.");return}g(!0),S(!1),p(null);const t=new FormData;t.append("file",f),t.append("name",a.name),t.append("collection_name",i),t.append("custom_properties",JSON.stringify(a.custom_properties)),A.post("/admin/media",t,{forceFormData:!0,onSuccess:()=>{S(!0),m({name:"",custom_properties:[]}),j(null),u(""),x(!1)},onError:()=>{p("Hubo un error al subir el archivo.")},onFinish:()=>g(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Subir media"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Nombre"}),e.jsx(n,{id:"name",value:a.name,onChange:t=>m({...a,name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"file",children:"Archivo"}),e.jsx(n,{type:"file",id:"file",onChange:t=>{var r;return j(((r=t.target.files)==null?void 0:r[0])||null)}})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Colecci贸n"}),e.jsxs(I,{children:[e.jsx(P,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",children:[i||"Seleccionar colecci贸n",e.jsx(L,{className:"w-4 h-4"})]})}),e.jsxs(U,{children:[e.jsx(H,{children:"Colecciones existentes"}),e.jsx(w,{}),k.map(t=>e.jsx(y,{onSelect:()=>{u(t),x(!1)},children:t},t)),e.jsx(w,{}),e.jsx(y,{onSelect:()=>x(!0),children:"Nueva colecci贸n..."})]})]}),D&&e.jsx(n,{className:"mt-2",placeholder:"Nombre de nueva colecci贸n",value:i,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Propiedades personalizadas"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(n,{placeholder:"Clave",value:o.key,onChange:t=>d({...o,key:t.target.value})}),e.jsx(n,{placeholder:"Valor",value:o.value,onChange:t=>d({...o,value:t.target.value})}),e.jsx(h,{onClick:F,children:"Agregar"})]}),e.jsx("ul",{className:"list-disc ml-6 mt-2 text-sm text-muted-foreground",children:a.custom_properties.map((t,r)=>e.jsxs("li",{children:[e.jsx("strong",{children:t.key}),": ",t.value]},r))})]}),e.jsx(h,{onClick:M,disabled:v,children:v?"Subiendo...":"Subir"}),_&&e.jsx("div",{className:"text-green-600 font-medium mt-2",children:"Archivo subido exitosamente."}),C&&e.jsx("div",{className:"text-red-600 font-medium mt-2",children:C})]})]})}export{ae as default};
