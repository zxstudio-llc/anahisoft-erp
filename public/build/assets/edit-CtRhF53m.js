import{d as I,r as d,j as e,H as F,a as S}from"./app-DQczwFTk.js";import{A as E}from"./app-layout-CxNCz1W0.js";import{C as c,a as h,b as u,d as x}from"./card-BNPG6E-E.js";import{I as p}from"./input-goWATpHJ.js";import{T}from"./textarea-DHAakLHN.js";import{B as k}from"./button-BYXnJyXv.js";import{L as r}from"./label-BchK1h47.js";import{S as D}from"./switch-x9PZ-zT7.js";import{I as w}from"./image-dropzone-B7t8X9ae.js";import{T as H}from"./tiptapWrapper-B23OfFwY.js";import"./app-C-su-A41.js";import"./tenant-status-listener-Bzjk6yNz.js";import"./index-Cou6Ygo0.js";import"./index-CTC3mW-r.js";import"./toast-lvG1LsW6.js";import"./app-sidebar-layout-DjIGW_b8.js";import"./index-D2mu7mBH.js";import"./utils-CPN-yreq.js";import"./index-DcW1-0jE.js";import"./index-BBPPPnEU.js";import"./index-KJ4lOR0W.js";import"./index-CqVE9Fls.js";import"./index-DSuT5VJt.js";import"./index-CnB8Y-kE.js";import"./index-BVHM8iLO.js";import"./x-CNv1352c.js";import"./createLucideIcon-D40S4Mwt.js";import"./index-BOxxC3ps.js";import"./index-ClSqUjUN.js";import"./index-CX1ZUDb2.js";import"./dropdown-menu-DWIT9g2E.js";import"./index-BfMh8EvQ.js";import"./index-CJpv9kZ5.js";import"./avatar-CLHvFKAC.js";import"./receipt-BIwab1oI.js";import"./file-text-mqHhLRuK.js";import"./folder-BRrK2jGA.js";import"./credit-card-DX0EPogz.js";import"./key-aou-cbKc.js";import"./shield-BhSokjS6.js";import"./dollar-sign-OeXEXPCy.js";import"./search-DPYN2drD.js";import"./app-logo-icon-2MFPo7KO.js";import"./cookie-consent-DYpW6VIi.js";import"./index-7Ou4doz_.js";import"./trash-2-b2Qe_qpo.js";import"./with-selector-C9hgCskx.js";import"./popover-PDQ3fITR.js";import"./code-BO9xQCBn.js";const L=i=>[{title:"Dashboard",href:"/admin"},{title:"Noticias",href:"/admin/news"},{title:i,href:"#"}];function ke({news:i}){const{errors:l}=I().props,[o,j]=d.useState(null),[g,f]=d.useState(i.image_url),[s,m]=d.useState({title:i.title||"",slug:i.slug||"",excerpt:i.excerpt||"",content:i.content||"",published_at:i.published_at||"",is_published:i.is_published||!1,image:null}),n=a=>{const{name:t,value:v,type:C,checked:N}=a.target;m(y=>({...y,[t]:C==="checkbox"?N:v}))},b=a=>{a.preventDefault();const t=new FormData;t.append("_method","put"),t.append("title",s.title),t.append("slug",s.slug),t.append("excerpt",s.excerpt),t.append("content",s.content),t.append("published_at",s.published_at),t.append("is_published",s.is_published?"1":"0"),!o&&i.image_url?t.append("remove_image","1"):o&&t.append("image",o),S.post(`/admin/news/${i.id}`,t,{forceFormData:!0,preserveScroll:!0})},_=a=>{j(a),a===null&&i.image_url&&f(null)};return e.jsxs(E,{breadcrumbs:L(i.title),children:[e.jsx(F,{title:`Editar: ${i.title}`}),e.jsxs("div",{className:"flex-1 space-y-6 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Editar noticia"}),e.jsx("p",{className:"text-muted-foreground",children:"Modifica los campos necesarios."})]}),e.jsx(k,{type:"submit",form:"news-form",children:"Guardar cambios"})]}),e.jsx("form",{onSubmit:b,id:"news-form",className:"space-y-6",children:e.jsxs("div",{className:"flex gap-6 items-start",children:[e.jsx("div",{className:"w-full space-y-6",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:"Información"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(r,{htmlFor:"image",className:"hidden",children:"Imagen"}),e.jsx(w,{image:o,onImageChange:_,defaultImage:g,title:"Portada de la noticia",description:"Imagen principal que aparecerá en el listado"})]}),e.jsxs("div",{className:"flex flex-col w-1/2 space-y-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"title",children:"Título"}),e.jsx(p,{id:"title",name:"title",value:s.title,onChange:n}),l.title&&e.jsx("p",{className:"text-sm text-red-500",children:l.title})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"slug",children:"Slug"}),e.jsx(p,{id:"slug",name:"slug",value:s.slug,onChange:n})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"excerpt",children:"Extracto"}),e.jsx(T,{id:"excerpt",name:"excerpt",value:s.excerpt,onChange:n,rows:3})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"content",children:"Contenido"}),e.jsx(H,{content:s.content,onChange:a=>m(t=>({...t,content:a})),placeholder:"Escribe el contenido de la noticia...",imageCollection:"news_content_images",modelType:"News",modelId:i.id}),l.content&&e.jsx("p",{className:"text-sm text-red-500",children:l.content})]})]})]})}),e.jsx("div",{className:"w-[25%] space-y-6",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:"Configuración"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"published_at",children:"Fecha de publicación"}),e.jsx(p,{id:"published_at",name:"published_at",type:"datetime-local",value:s.published_at,onChange:n})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"is_published",children:"Publicar"}),e.jsx(D,{id:"is_published",name:"is_published",checked:s.is_published,onCheckedChange:a=>m(t=>({...t,is_published:a}))})]})]})]})})]})})]})]})}export{ke as default};
